{"version":3,"file":"./backend/admin.certificates.js","mappings":"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","sources":["webpack://learnpress-certificates/./assets/src/js/backend/admin.certificates.js"],"sourcesContent":["/* eslint-disable no-var */\n/**\n * Plugin LearnPress Certificates.\n *\n * @author ThimPress\n * @package\n * @version 4.0.0\n *\n * Nhamdv -  Compatible with jQuery > 3.0.0\n */\n( function( $ ) {\n\tvar mediaSelector = {\n\t\t__onSelect: null,\n\t\t__multiple: false,\n\t\t__context: null,\n\t\tactiveFrame: false,\n\n\t\tframe( args ) {\n\t\t\targs = $.extend( {}, args || {} );\n\t\t\tconst k = Math.random() * 100;\n\t\t\tif ( ! this._frame ) {\n\t\t\t\tthis._frame = [];\n\t\t\t}\n\t\t\tif ( ! this._frame[ k ] ) {\n\t\t\t\tthis._frame[ k ] = wp.media( {\n\t\t\t\t\ttitle: args.title || 'Select Media',\n\t\t\t\t\tbutton: {\n\t\t\t\t\t\ttext: args.button_text || 'Insert',\n\t\t\t\t\t},\n\t\t\t\t\tmultiple: args.multiple,\n\t\t\t\t} );\n\t\t\t\tthis._frame[ k ].state( 'library' ).on( 'select', this.select );\n\t\t\t}\n\t\t\treturn this._frame[ k ];\n\t\t},\n\n\t\tselect() {\n\t\t\tif ( typeof mediaSelector.__onSelect === 'function' ) {\n\t\t\t\tlet source = this.get( 'selection' );\n\n\t\t\t\tif ( ! mediaSelector.__multiple ) {\n\t\t\t\t\tsource = source.single().toJSON();\n\t\t\t\t} else {\n\t\t\t\t\tsource = source.toJSON();\n\t\t\t\t}\n\t\t\t\tmediaSelector.__onSelect.call( mediaSelector._frame, source, mediaSelector.__context );\n\t\t\t\tmediaSelector.__onSelect = null;\n\t\t\t\tmediaSelector.__context = null;\n\t\t\t}\n\t\t},\n\t\topen( args ) {\n\t\t\targs = $.extend( {\n\t\t\t\tmultiple: false,\n\t\t\t\tcontext: null,\n\t\t\t\tonSelect() {\n\t\t\t\t},\n\t\t\t}, args || {} );\n\t\t\tif ( typeof args.onSelect === 'function' ) {\n\t\t\t\tmediaSelector.__onSelect = args.onSelect;\n\t\t\t\tmediaSelector.__multiple = args.multiple;\n\t\t\t\tmediaSelector.__context = args.context;\n\t\t\t\tconst f = mediaSelector.frame( args );\n\t\t\t\tf.open();\n\t\t\t}\n\t\t},\n\t};\n\n\t$( document ).ready( function() {\n\t\tvar _ = {\n\t\t\tnow: Date.now || function() {\n\t\t\t\treturn new Date().getTime();\n\t\t\t},\n\t\t\tdebounce( func, wait, immediate ) {\n\t\t\t\tlet timeout, args, context, timestamp, result;\n\n\t\t\t\tvar later = function() {\n\t\t\t\t\tconst last = _.now() - timestamp;\n\n\t\t\t\t\tif ( last < wait && last >= 0 ) {\n\t\t\t\t\t\ttimeout = setTimeout( later, wait - last );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttimeout = null;\n\t\t\t\t\t\tif ( ! immediate ) {\n\t\t\t\t\t\t\tresult = func.apply( context, args );\n\t\t\t\t\t\t\tif ( ! timeout ) {\n\t\t\t\t\t\t\t\tcontext = args = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\treturn function() {\n\t\t\t\t\tcontext = this;\n\t\t\t\t\targs = arguments;\n\t\t\t\t\ttimestamp = _.now();\n\t\t\t\t\tconst callNow = immediate && ! timeout;\n\t\t\t\t\tif ( ! timeout ) {\n\t\t\t\t\t\ttimeout = setTimeout( later, wait );\n\t\t\t\t\t}\n\t\t\t\t\tif ( callNow ) {\n\t\t\t\t\t\tresult = func.apply( context, args );\n\t\t\t\t\t\tcontext = args = null;\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t};\n\t\t\t},\n\t\t};\n\n\t\t// Global\n\t\t// TODO: move code to another ex: move to admin.assign.certificate.js\n\t\tfunction ajaxUpdateCourseCertificate( id, cert ) {\n\t\t\t$.ajax( {\n\t\t\t\turl: '',\n\t\t\t\tdata: {\n\t\t\t\t\t'lp-ajax': 'update-course-certificate',\n\t\t\t\t\tcourse_id: id,\n\t\t\t\t\tcert_id: cert,\n\t\t\t\t},\n\t\t\t\tsuccess() {\n\t\t\t\t\t$( '#certificate-browser' ).find( '.theme.updating' ).removeClass( 'updating' );\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\t$( document ).on( 'click', '.button-assign-certificate', function( e ) {\n\t\t\te.preventDefault();\n\t\t\tconst $wrapper = $( '#certificate-browser' ).find( '.themes' ),\n\t\t\t\t$themes = $wrapper.find( '.theme' ),\n\t\t\t\t$selected = $( this ).closest( '.theme' );\n\t\t\t$themes.removeClass( 'active' );\n\t\t\t$wrapper.prepend( $selected.addClass( 'active updating' ) );\n\n\t\t\t// Update\n\t\t\tajaxUpdateCourseCertificate( $( '#post_ID' ).val(), $selected.data( 'id' ) );\n\t\t} ).on( 'click', '.button-remove-certificate', function( e ) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\t$( this ).closest( '.theme' ).removeClass( 'active' ).addClass( 'updating' );\n\n\t\t\t// Update\n\t\t\tajaxUpdateCourseCertificate( $( '#post_ID' ).val(), 0 );\n\t\t} );\n\t\t// TODO: move code to another ex: move to admin.assign.certificate.js\n\n\t\t// Vue js\n\t\tif ( typeof lpCertificatesSettings === 'undefined' ) {\n\t\t\tconsole.log( 'lpCertificatesSettings is not defined!' );\n\t\t\tconsole.log( 'Only load when edit certificate' );\n\t\t\treturn;\n\t\t}\n\n\t\twindow.$LP_Certificates = new Vue( {\n\t\t\tel: '#learn-press-certificates',\n\t\t\ttemplate: '#tmpl-certificates',\n\t\t\tdata: $.extend( {\n\t\t\t\tdragover: false,\n\t\t\t\tviewport: {\n\t\t\t\t\twidth: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\ttemplateWidth: 0,\n\t\t\t\t\ttemplateHeight: 0,\n\t\t\t\t\tratio: 1,\n\t\t\t\t},\n\t\t\t\t$view: false,\n\t\t\t\t$layerOptions: null,\n\t\t\t\tloaded: false,\n\t\t\t\ti18n: {},\n\t\t\t\ttemplate: 'xxx',\n\t\t\t}, lpCertificatesSettings ),\n\n\t\t\tcomputed: {\n\t\t\t\tgetMaxWidth() {\n\t\t\t\t\treturn Math.random();\n\t\t\t\t},\n\t\t\t},\n\t\t\tcreated() {\n\t\t\t\tconst that = this;\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tthat.init();\n\t\t\t\t}, 300 );\n\t\t\t},\n\n\t\t\tmethods: {\n\t\t\t\tinit() {\n\t\t\t\t\tconst that = this;\n\t\t\t\t\tthis.$img = this.$( '.cert-template' );\n\t\t\t\t\tthis.$img_preload = document.getElementById( 'cert-template-preload' );\n\t\t\t\t\tthis.initCanvas();\n\t\t\t\t\tthis.initDragAndDrop();\n\t\t\t\t\tif ( $( '#cert-template-preload' ).length ) {\n\t\t\t\t\t\tthis.viewport = {\n\t\t\t\t\t\t\twidth: this.$img_preload.width,\n\t\t\t\t\t\t\theight: this.$img_preload.height,\n\t\t\t\t\t\t\ttemplateWidth: this.$img_preload.naturalWidth,\n\t\t\t\t\t\t\ttemplateHeight: this.$img_preload.naturalHeight,\n\t\t\t\t\t\t\tratio: this.$img_preload.width / this.$img_preload.naturalWidth,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.updateView();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$img.on( 'load', function() {\n\t\t\t\t\t\tthat.viewport = {\n\t\t\t\t\t\t\twidth: this.width,\n\t\t\t\t\t\t\theight: this.height,\n\t\t\t\t\t\t\ttemplateWidth: this.naturalWidth,\n\t\t\t\t\t\t\ttemplateHeight: this.naturalHeight,\n\t\t\t\t\t\t\tratio: this.width / this.naturalWidth,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconsole.log( that.viewport );\n\t\t\t\t\t\tthat.loaded && that.ajaxUpdateTemplate();\n\t\t\t\t\t\tthat.updateView();\n\t\t\t\t\t} ).trigger( 'load' );\n\n\t\t\t\t\tthis.$layerOptions = $( '.cert-layer-options' );\n\n\t\t\t\t\t$( document ).on( 'certificate/change-layer-option', _.debounce( function( e, data ) {\n\t\t\t\t\t\tconst options = {};\n\t\t\t\t\t\toptions[ data.name ] = data.value;\n\t\t\t\t\t\tthat.updateActiveLayer( options );\n\t\t\t\t\t}, 100 ) );\n\n\t\t\t\t\t$( window ).on( 'resize.certificate-update-view', function() {\n\t\t\t\t\t\tlet timer = $( this ).data( 'timer' );\n\t\t\t\t\t\ttimer && clearTimeout( timer );\n\t\t\t\t\t\ttimer = setTimeout( function() {\n\t\t\t\t\t\t\tthat.updateView();\n\t\t\t\t\t\t}, 300 );\n\t\t\t\t\t} );\n\n\t\t\t\t\t$( document ).on( 'click', '.layer-center', function() {\n\t\t\t\t\t\tconst type = $( this ).data( 'center' );\n\t\t\t\t\t\tswitch ( type ) {\n\t\t\t\t\t\tcase 'center-h':\n\t\t\t\t\t\t\tthat.centerH();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'center-v':\n\t\t\t\t\t\t\tthat.centerV();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'center':\n\t\t\t\t\t\t\tthat.center();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t$( document ).on( 'click', '.cert-layers .layer', function( e ) {\n\t\t\t\t\t\tconst $layer = that.findLayer( $( this ).data( 'layer' ) );\n\t\t\t\t\t\t$layer && that.$canvas.setActiveObject( $layer );\n\t\t\t\t\t\tif ( $( e.target ).is( 'a' ) ) {\n\t\t\t\t\t\t\tthat.deleteLayer();\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t},\n\t\t\t\tfindLayer( name ) {\n\t\t\t\t\tconst $layers = this.$canvas.getObjects();\n\t\t\t\t\tfor ( const i in $layers ) {\n\t\t\t\t\t\tif ( $layers[ i ].name === name ) {\n\t\t\t\t\t\t\treturn $layers[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\taddCustomPreview() {\n\n\t\t\t\t},\n\t\t\t\tcenterV( $layer ) {\n\t\t\t\t\tif ( ! $layer ) {\n\t\t\t\t\t\t$layer = this.getActiveLayer();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! $layer ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst position = {\n\t\t\t\t\t\ttop: ( this.$canvas.height / this.viewport.ratio - $layer.height * Math.abs( $layer.scaleY ) ) / 2,\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( $layer.originY === 'center' ) {\n\t\t\t\t\t\tposition.top += $layer.height / 2;\n\t\t\t\t\t}\n\n\t\t\t\t\t$layer.set( position );\n\t\t\t\t\t$layer.setCoords();\n\t\t\t\t\tthis.updateView();\n\t\t\t\t\tthis.updateActiveLayer( position );\n\t\t\t\t},\n\t\t\t\tcenterH( $layer ) {\n\t\t\t\t\tif ( ! $layer ) {\n\t\t\t\t\t\t$layer = this.getActiveLayer();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! $layer ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst position = {\n\t\t\t\t\t\tleft: ( this.$canvas.width / this.viewport.ratio - $layer.width * Math.abs( $layer.scaleX ) ) / 2,\n\t\t\t\t\t};\n\n\t\t\t\t\tif ( $layer.originX === 'center' ) {\n\t\t\t\t\t\tposition.left += $layer.width / 2;\n\t\t\t\t\t}\n\n\t\t\t\t\t$layer.set( position );\n\t\t\t\t\t$layer.setCoords();\n\t\t\t\t\tthis.updateView();\n\t\t\t\t\tthis.updateActiveLayer( position );\n\t\t\t\t},\n\t\t\t\tcenter( $layer ) {\n\t\t\t\t\tthis.centerV( $layer );\n\t\t\t\t\tthis.centerH( $layer );\n\t\t\t\t},\n\t\t\t\tdeleteLayer() {\n\t\t\t\t\tif ( ! confirm( this.i18n.confirm_remove_layer ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst $layer = this.getActiveLayer(),\n\t\t\t\t\t\tname = $layer.get( 'name' );\n\t\t\t\t\tif ( $layer ) {\n\t\t\t\t\t\tthis.$canvas.remove( $layer );\n\t\t\t\t\t\tVue.http.post( '', {\n\t\t\t\t\t\t\tlayer: name,\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\temulateJSON: true,\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\t'lp-ajax': 'cert-remove-layer',\n\t\t\t\t\t\t\t\tid: this.id,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} ).then( function() {\n\t\t\t\t\t\t\t$( '.cert-layers' ).children().filter( '[data-layer=\"' + name + '\"]' ).remove();\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgetActiveLayer() {\n\t\t\t\t\treturn this.$canvas.getActiveObject();\n\t\t\t\t},\n\t\t\t\tgetMaxWidth() {\n\t\t\t\t\tconst w = this.$().width();\n\t\t\t\t\treturn w - 60;\n\t\t\t\t},\n\t\t\t\tupdateActiveLayer( options, $layer ) {\n\t\t\t\t\t$layer = $layer ? $layer : this.getActiveLayer();\n\t\t\t\t\tif ( ! $layer ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfor ( const prop in options ) {\n\t\t\t\t\t\tthis.setLayerProp( $layer, prop, options[ prop ] );\n\t\t\t\t\t}\n\t\t\t\t\tthis.$canvas.renderAll();\n\t\t\t\t\tthis.ajaxUpdateLayer( $layer );\n\t\t\t\t},\n\t\t\t\tcalculate() {\n\t\t\t\t\tthis.viewport = $.extend( this.viewport, {\n\t\t\t\t\t\twidth: this.$img.width(),\n\t\t\t\t\t\theight: this.$img.height(),\n\t\t\t\t\t\tratio: this.$img.width() / this.viewport.templateWidth,\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t\tupdateView() {\n\t\t\t\t\tconst maxWidth = this.getMaxWidth();\n\t\t\t\t\tthis.calculate();\n\t\t\t\t\tif ( this.viewport.templateWidth < maxWidth && this.template ) {\n\t\t\t\t\t\tthis.$( '#cert-design-view' ).css( 'width', this.viewport.width + 60 ).addClass( 'small' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$( '#cert-design-view' ).css( 'width', '' ).removeClass( 'small' );\n\t\t\t\t\t}\n\t\t\t\t\tthis.$canvas.setHeight( this.viewport.height );\n\t\t\t\t\tthis.$canvas.setWidth( this.viewport.width );\n\t\t\t\t\tthis.$canvas.setZoom( this.viewport.ratio );\n\t\t\t\t\tthis.$canvas.calcOffset();\n\t\t\t\t\tthis.$canvas.renderAll();\n\t\t\t\t},\n\t\t\t\t$( selector ) {\n\t\t\t\t\tconst $el = $( this.$el );\n\t\t\t\t\treturn selector ? $el.find( selector ) : $el;\n\t\t\t\t},\n\t\t\t\tgetLayerOptions( $layer ) {\n\t\t\t\t\treturn $layer ? $layer.toObject( this.getExtendedFields() ) : {};\n\t\t\t\t},\n\t\t\t\tgetExtendedFields() {\n\t\t\t\t\tlet _fields = [ 'name', 'fieldType', 'display', 'customText', 'format', 'variable', 'formatDate', 'qr_size', 'fontFile' ],\n\t\t\t\t\t\tfields = $( document ).triggerHandler( 'learn_press_certificates_extended_fields', [ _fields ] );\n\t\t\t\t\tif ( typeof fields === 'undefined' ) {\n\t\t\t\t\t\tfields = _fields;\n\t\t\t\t\t}\n\t\t\t\t\treturn fields;\n\t\t\t\t},\n\t\t\t\tshowControls( e ) {\n\t\t\t\t},\n\t\t\t\tshowLines() {\n\t\t\t\t\tconst $el = this.getActiveLayer();\n\t\t\t\t\tif ( ! $el ) {\n\t\t\t\t\t\tthis.hideLines();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$( '#cert-design-view' ).addClass( 'dragover' );\n\t\t\t\t\tthis.$( '#cert-design-line-horizontal' ).css( 'top', $el.top * this.viewport.ratio );\n\t\t\t\t\tthis.$( '#cert-design-line-vertical' ).css( 'left', $el.left * this.viewport.ratio - 1 );\n\t\t\t\t},\n\t\t\t\thideLines() {\n\t\t\t\t\tthis.$( '#cert-design-view' ).removeClass( 'dragover' );\n\t\t\t\t},\n\t\t\t\ttoFixedX( num ) {\n\t\t\t\t\treturn Math.ceil( num * 10 ) / 10;\n\t\t\t\t},\n\t\t\t\thideControls() {\n\t\t\t\t},\n\n\t\t\t\tgetLayers() {\n\t\t\t\t\tconst layers = {},\n\t\t\t\t\t\t$objects = this.$canvas.getObjects();\n\n\t\t\t\t\tfor ( const i in $objects ) {\n\t\t\t\t\t\tlayers[ $objects[ i ].name ] = this.getLayerOptions( $objects[ i ] );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn layers;\n\t\t\t\t},\n\n\t\t\t\tajaxUpdateLayers: _.debounce( function() {\n\t\t\t\t\tconst that = this;\n\n\t\t\t\t\treturn Vue.http.post( '', {\n\t\t\t\t\t\tlayers: this.getLayers(),\n\t\t\t\t\t}, {\n\t\t\t\t\t\temulateJSON: true,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t'lp-ajax': 'cert-update-layers',\n\t\t\t\t\t\t\tid: this.id,\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}, 300 ),\n\n\t\t\t\tajaxUpdateLayer: _.debounce( function( layer, loadSettings ) {\n\t\t\t\t\tlayer = $.isPlainObject( layer ) ? layer : this.getLayerOptions( layer );\n\n\t\t\t\t\tconst that = this,\n\t\t\t\t\t\thash = JSON.stringify( layer ).md5();\n\t\t\t\t\tif ( hash === layer.hash ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Vue.http.post( '', {\n\t\t\t\t\t\tlayer,\n\t\t\t\t\t\t'load-settings': loadSettings ? 'yes' : 'no',\n\t\t\t\t\t}, {\n\t\t\t\t\t\temulateJSON: true,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t'lp-ajax': 'cert-update-layer',\n\t\t\t\t\t\t\tid: this.id,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ).then( function( response ) {\n\t\t\t\t\t\tconst $layerOptions = $( response.body );\n\t\t\t\t\t\tif ( $layerOptions.hasClass( 'cert-layer-options' ) ) {\n\t\t\t\t\t\t\tthat.$layerOptions = $layerOptions;\n\t\t\t\t\t\t\t$( '#certificates-options' ).removeClass( 'loading' ).find( '.inside' ).html( that.$layerOptions );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}, 300 ),\n\n\t\t\t\tajaxUpdateTemplate: _.debounce( function() {\n\t\t\t\t\treturn Vue.http.post( '', {\n\t\t\t\t\t\ttemplate: this.template,\n\t\t\t\t\t}, {\n\t\t\t\t\t\temulateJSON: true,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t'lp-ajax': 'cert-update-template',\n\t\t\t\t\t\t\tid: this.id,\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}, 300 ),\n\n\t\t\t\tajaxLoadLayer: _.debounce( function( $layer ) {\n\t\t\t\t\tconst that = this;\n\t\t\t\t\t$( '#certificates-options' ).show().addClass( 'loading' );\n\t\t\t\t\treturn Vue.http.post( '', {\n\t\t\t\t\t\tlayer: $layer.get( 'name' ),\n\t\t\t\t\t}, {\n\t\t\t\t\t\temulateJSON: true,\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t'lp-ajax': 'cert-load-layer',\n\t\t\t\t\t\t\tid: this.id,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ).then( function( response ) {\n\t\t\t\t\t\tthat.$layerOptions = $( response.body );\n\t\t\t\t\t\t$( '#certificates-options' ).removeClass( 'loading' ).find( '.inside' ).html( that.$layerOptions );\n\t\t\t\t\t} );\n\t\t\t\t}, 300 ),\n\n\t\t\t\taddLayerList( $layer ) {\n\t\t\t\t\tconst $l = $( '<div class=\"layer\" data-layer=\"' + $layer.name + '\">' + 'Layer #' + $layer.text + '<a href=\"\"></a></div>' );\n\t\t\t\t\t$( '.cert-layers' ).prepend( $l );\n\t\t\t\t},\n\n\t\t\t\taddLayer( $layer, args ) {\n\t\t\t\t\targs = $.extend( {\n\t\t\t\t\t\tsetActive: true,\n\t\t\t\t\t}, args || {} );\n\n\t\t\t\t\tif ( $.isPlainObject( $layer ) ) {\n\t\t\t\t\t\t$layer = this.createLayer( $layer );\n\t\t\t\t\t}\n\t\t\t\t\tif ( $layer ) {\n\t\t\t\t\t\tthis.loaded && this.ajaxUpdateLayer( $layer, true );\n\t\t\t\t\t\tthis.$canvas.add( $layer );\n\t\t\t\t\t\tthis.addLayerList( $layer );\n\t\t\t\t\t\tif ( args.setActive ) {\n\t\t\t\t\t\t\tthis.$canvas.setActiveObject( $layer );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.$canvas.renderAll();\n\t\t\t\t\t}\n\t\t\t\t\treturn $layer;\n\t\t\t\t},\n\n\t\t\t\tcreateLayer( args ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar defaults = $.extend( {\n\t\t\t\t\t\t\t\tfontSize: 24,\n\t\t\t\t\t\t\t\tleft: 0,\n\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\tlineHeight: 1,\n\t\t\t\t\t\t\t\toriginX: 'center',\n\t\t\t\t\t\t\t\toriginY: 'center',\n\t\t\t\t\t\t\t\tfontFamily: 'Helvetica',\n\t\t\t\t\t\t\t\tname: this.uniqueId(),\n\t\t\t\t\t\t\t\tfieldType: 'custom',\n\t\t\t\t\t\t\t\tvariable: '',\n\t\t\t\t\t\t\t}, args ),\n\t\t\t\t\t\t\ttext = args.text || '',\n\t\t\t\t\t\t\t$object = new fabric.Text( text, defaults ),\n\t\t\t\t\t\t\tthat = this;\n\n\t\t\t\t\t\tif ( args.fieldType == 'verified-link' ) {\n\t\t\t\t\t\t\tdefaults.qr_size = 40;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst is_url = /^(https?|s?ftp):\\/\\//i.test( args.text );\n\t\t\t\t\t\tif ( args.fieldType == 'verified-link' && args.qr_size > 0 && is_url ) {\n\t\t\t\t\t\t\tconst qr_code = new Image();\n\t\t\t\t\t\t\tdefaults.type = 'image';\n\t\t\t\t\t\t\tdefaults.height = defaults.qr_size;\n\t\t\t\t\t\t\tdefaults.width = defaults.qr_size;\n\t\t\t\t\t\t\tqr_code.crossOrigin = 'Anonymous';\n\t\t\t\t\t\t\tqr_code.src = args.text;\n\t\t\t\t\t\t\t$object = new fabric.Image( qr_code, defaults );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$object.set( {\n\t\t\t\t\t\t\tborderColor: '#AAA',\n\t\t\t\t\t\t\tcornerColor: '#666',\n\t\t\t\t\t\t\tcornerSize: 7,\n\t\t\t\t\t\t\ttransparentCorners: true,\n\t\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t$.each( defaults, function( k, v ) {\n\t\t\t\t\t\t\tthat.setLayerProp( $object, k, v );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tconst $_object = $( document ).triggerHandler( 'learn_press_certificate_layer_obj', [ $object, args ] );\n\t\t\t\t\t\tif ( typeof $_object === 'object' ) {\n\t\t\t\t\t\t\t$object = $_object;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tconsole.log( e );\n\t\t\t\t\t}\n\t\t\t\t\treturn $object;\n\t\t\t\t},\n\n\t\t\t\t// Update options of a layer to settings panel\n\t\t\t\tupdateLayerOptions: _.debounce( function( $layer ) {\n\t\t\t\t\tconst that = this,\n\t\t\t\t\t\toptions = this.getLayerOptions( $layer ? $layer : this.getActiveLayer() ),\n\t\t\t\t\t\t$opt = this.$layerOptions.find( ':input' );\n\n\t\t\t\t\t$.each( options, function( k, v ) {\n\t\t\t\t\t\tswitch ( k ) {\n\t\t\t\t\t\tcase 'fontFamily':\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'fontStyle':\n\t\t\t\t\t\tcase 'fontWeight':\n\t\t\t\t\t\t\tif ( v === 'normal' ) {\n\t\t\t\t\t\t\t\tv = '';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'originY':\n\t\t\t\t\t\t\tif ( v === 'middle' ) {\n\t\t\t\t\t\t\t\tv = 'center';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'top':\n\t\t\t\t\t\tcase 'left':\n\t\t\t\t\t\t\tv = parseInt( v );\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'angle':\n\t\t\t\t\t\tcase 'scaleX':\n\t\t\t\t\t\tcase 'scaleY':\n\t\t\t\t\t\t\tv = that.toFixedX( v );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$opt.filter( '[name=\"' + k + '\"]' ).val( v );\n\t\t\t\t\t} );\n\n\t\t\t\t\t$( '#certificates-options' ).show();\n\t\t\t\t}, 300 ),\n\n\t\t\t\t// Set property of a layer\n\t\t\t\tsetLayerProp( $layer, prop, value ) {\n\t\t\t\t\tconst options = {};\n\t\t\t\t\tif ( value === undefined ) {\n\t\t\t\t\t\tvalue = '';\n\t\t\t\t\t}\n\t\t\t\t\tswitch ( prop ) {\n\t\t\t\t\tcase 'color':\n\t\t\t\t\t\toptions.fill = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'scaleX':\n\t\t\t\t\tcase 'scaleY':\n\t\t\t\t\t\tif ( isNaN( value ) ) {\n\t\t\t\t\t\t\tvalue = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( value < 0 ) {\n\t\t\t\t\t\t\tif ( prop === 'scaleX' ) {\n\t\t\t\t\t\t\t\t$layer.flipX = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t$layer.flipY = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ( prop === 'scaleX' ) {\n\t\t\t\t\t\t\t$layer.flipX = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$layer.flipY = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions[ prop ] = this.toFixedX( Math.abs( value ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'top':\n\t\t\t\t\tcase 'left':\n\t\t\t\t\t\tif ( isNaN( value ) ) {\n\t\t\t\t\t\t\tvalue = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptions[ prop ] = parseInt( value );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'angle':\n\t\t\t\t\t\toptions[ prop ] = this.toFixedX( value );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'fontFamily':\n\t\t\t\t\t\tvalue = '' + value;\n\t\t\t\t\t\t$layer.set( 'fontFamily', value.replace( /\\+/, ' ' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\toptions[ prop ] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( options.flipX ) {\n\t\t\t\t\t\toptions.scaleX = -this.toFixedX( options.scaleX );\n\t\t\t\t\t}\n\t\t\t\t\tif ( options.flipY ) {\n\t\t\t\t\t\toptions.scaleY = -this.toFixedX( options.scaleY );\n\t\t\t\t\t}\n\n\t\t\t\t\t$.each( options, function( k, v ) {\n\t\t\t\t\t\t$layer.set( k, v );\n\t\t\t\t\t} );\n\t\t\t\t\t$layer.setCoords();\n\t\t\t\t},\n\t\t\t\tonObjectSelected( e ) {\n\t\t\t\t\t//this.$canvas.bringToFront(e.target);\n\t\t\t\t\tconst layerOptions = this.getLayerOptions( e.target );\n\t\t\t\t\tfor ( const i in layerOptions ) {\n\t\t\t\t\t\tthis.setLayerProp( e.target, i, layerOptions[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\t$( '.cert-layers' ).children().removeClass( 'active' ).filter( '[data-layer=\"' + e.target.name + '\"]' ).addClass( 'active' );\n\t\t\t\t\tthis.ajaxLoadLayer( e.target );\n\t\t\t\t},\n\t\t\t\tonObjectMoving( event ) {\n\t\t\t\t\tthis.updateLayerOptions();\n\t\t\t\t\tthis.ajaxUpdateLayer( event.target );\n\t\t\t\t\tthis.showLines();\n\t\t\t\t},\n\t\t\t\tonObjectRotating( event ) {\n\t\t\t\t\tthis.updateLayerOptions();\n\t\t\t\t\tthis.ajaxUpdateLayer( event.target );\n\t\t\t\t\tconst $object = this.$canvas.getActiveObject(),\n\t\t\t\t\t\tangle = this.toFixedX( $object.angle );\n\t\t\t\t\tthis.setPropSlider( 'angle', angle );\n\t\t\t\t\tthis.hideLines();\n\t\t\t\t},\n\t\t\t\tonObjectMouseup() {\n\t\t\t\t\tthis.hideLines();\n\t\t\t\t},\n\t\t\t\tonObjectMousedown() {\n\t\t\t\t\tthis.showLines();\n\t\t\t\t},\n\t\t\t\tonBeforeSelectionCleared( e ) {\n\t\t\t\t\t$( '#certificates-options' ).hide();\n\t\t\t\t\t$( '.cert-layers' ).children().removeClass( 'active' );\n\t\t\t\t\tthis.hideLines();\n\t\t\t\t},\n\t\t\t\tonObjectModified( e ) {\n\t\t\t\t\tthis.showControls( e );\n\t\t\t\t},\n\t\t\t\tlimitObjectScale() {\n\t\t\t\t\tlet $object = this.$canvas.getActiveObject(),\n\t\t\t\t\t\tscaleX = this.toFixedX( $object.scaleX ),\n\t\t\t\t\t\tscaleY = this.toFixedX( $object.scaleY );\n\t\t\t\t\tif ( $object.flipX ) {\n\t\t\t\t\t\tscaleX = -scaleX;\n\t\t\t\t\t}\n\t\t\t\t\tif ( $object.flipY ) {\n\t\t\t\t\t\tscaleY = -scaleY;\n\t\t\t\t\t}\n\t\t\t\t\tthis.ajaxUpdateLayer( $object );\n\t\t\t\t\tthis.setPropSlider( 'scaleX', scaleX );\n\t\t\t\t\tthis.setPropSlider( 'scaleY', scaleY );\n\t\t\t\t},\n\t\t\t\tsetPropSlider( name, value ) {\n\t\t\t\t\tthis.$layerOptions\n\t\t\t\t\t\t.find( 'input[name=\"' + name + '\"]' )\n\t\t\t\t\t\t.val( value )\n\t\t\t\t\t\t.siblings( '.cert-option-slider' )\n\t\t\t\t\t\t.slider( 'option', 'value', value );\n\t\t\t\t},\n\t\t\t\tinitCanvas() {\n\t\t\t\t\tif ( ! this.$canvas ) {\n\t\t\t\t\t\tconst that = this,\n\t\t\t\t\t\t\t$canvas = this.$( 'canvas' );\n\n\t\t\t\t\t\tthis.$canvas = new fabric.Canvas( $canvas.get( 0 ), this.layers );\n\t\t\t\t\t\tthis.$canvas.on( {\n\t\t\t\t\t\t\t'object:selected': this.onObjectSelected,\n\t\t\t\t\t\t\t'object:moving': this.onObjectMoving,\n\t\t\t\t\t\t\t'object:rotating': this.onObjectRotating,\n\t\t\t\t\t\t\t'mouse:up': this.onObjectMouseup,\n\t\t\t\t\t\t\t'mouse:down': this.onObjectMousedown,\n\t\t\t\t\t\t\t'before:selection:cleared': this.onBeforeSelectionCleared,\n\t\t\t\t\t\t\t'object:modified': this.onObjectModified,\n\t\t\t\t\t\t} ).observe( 'object:scaling', this.limitObjectScale );\n\t\t\t\t\t\tthis.$canvas.selection = false;\n\t\t\t\t\t\t$.each( this.layers, function( i, layer ) {\n\t\t\t\t\t\t\tif ( ! layer.type ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthat.addLayer( layer, { setActive: false } );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t_.debounce( this.updateView, 300 )();\n\t\t\t\t\t\tconsole.log( 'initCanvas' );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tinitDragAndDrop() {\n\t\t\t\t\tconst that = this;\n\t\t\t\t\tthis.$view = $( this.$el ).find( '#cert-design-view' );\n\n\t\t\t\t\t$( '.cert-fields li' ).draggable( {\n\t\t\t\t\t\thelper: 'clone',\n\t\t\t\t\t\tdrag( e, ui ) {\n\t\t\t\t\t\t\tconst targetOffset = that.$view.offset();\n\t\t\t\t\t\t\tthat.dragover = {\n\t\t\t\t\t\t\t\tleft: ui.offset.left - targetOffset.left + 26,\n\t\t\t\t\t\t\t\ttop: ui.offset.top - targetOffset.top + 13,\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif ( that.dragover.left < 0 || that.dragover.top < 0 ) {\n\t\t\t\t\t\t\t\tthat.dragover = false;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthat.updateLines();\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t\t$( '#cert-design-editor' ).droppable( {\n\t\t\t\t\t\tover( e, ui ) {\n\t\t\t\t\t\t\tthat.dragover = true;\n\t\t\t\t\t\t\tthat.dragover = ui.position;\n\t\t\t\t\t\t\tthat.updateLines();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tout() {\n\t\t\t\t\t\t\tthat.dragover = false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdrop( e, ui ) {\n\t\t\t\t\t\t\tthat.dragover = false;\n\t\t\t\t\t\t\tconst parentOffset = that.$view.find( '.canvas-container' ).offset();\n\t\t\t\t\t\t\tconst left = ( ui.offset.left - parentOffset.left + ui.draggable.outerWidth() / 2 ) / that.viewport.ratio,\n\t\t\t\t\t\t\t\ttop = ( ui.offset.top - parentOffset.top + ui.draggable.outerHeight() / 2 ) / that.viewport.ratio;\n\t\t\t\t\t\t\tthat.addLayerByDrop( {\n\t\t\t\t\t\t\t\ttop,\n\t\t\t\t\t\t\t\tleft,\n\t\t\t\t\t\t\t\ttext: ui.draggable.text().trim(),\n\t\t\t\t\t\t\t\tfieldType: ui.draggable.data( 'type' ),\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\n\t\t\t\t\t$( '.cert-layers' ).sortable( {\n\t\t\t\t\t\taxis: 'y',\n\t\t\t\t\t\tstart( e, ui ) {\n\t\t\t\t\t\t\tconst $children = $( this ).children();\n\t\t\t\t\t\t\tui.item.data( 'position', $children.index( ui.item ) );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdate( e, ui ) {\n\t\t\t\t\t\t\tconst $obj = that.$canvas.getActiveObject();\n\n\t\t\t\t\t\t\tif ( ! $obj ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet $children = $( this ).children(),\n\t\t\t\t\t\t\t\toldPosition = ui.item.data( 'position' ),\n\t\t\t\t\t\t\t\tnewPosition = $children.index( ui.item ),\n\t\t\t\t\t\t\t\ti = 0;\n\n\t\t\t\t\t\t\tif ( newPosition > oldPosition ) {\n\t\t\t\t\t\t\t\tfor ( i = 0; i < newPosition - oldPosition; i++ ) {\n\t\t\t\t\t\t\t\t\t$obj.sendBackwards();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfor ( i = 0; i < oldPosition - newPosition; i++ ) {\n\t\t\t\t\t\t\t\t\t$obj.bringForward();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthat.ajaxUpdateLayers();\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t},\n\n\t\t\t\tupdateRulers() {\n\t\t\t\t\tif ( this.dragover ) {\n\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tupdateLines() {\n\t\t\t\t\tif ( this.dragover ) {\n\t\t\t\t\t\t$( this.$el )\n\t\t\t\t\t\t\t.find( '.cert-design-line' )\n\t\t\t\t\t\t\t.filter( '.horizontal' ).css( 'top', this.dragover.top ).end()\n\t\t\t\t\t\t\t.filter( '.vertical' ).css( 'left', this.dragover.left );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tuniqueId() {\n\t\t\t\t\tfunction s4() {\n\t\t\t\t\t\treturn Math.floor( ( 1 + Math.random() ) * 0x10000 )\n\t\t\t\t\t\t\t.toString( 16 )\n\t\t\t\t\t\t\t.substring( 1 );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn s4() + s4() + s4() + s4();\n\t\t\t\t},\n\t\t\t\tselectTemplate() {\n\t\t\t\t\tmediaSelector.open( {\n\t\t\t\t\t\tcontext: this,\n\t\t\t\t\t\tonSelect( source, that ) {\n\t\t\t\t\t\t\tif ( source.sizes ) {\n\t\t\t\t\t\t\t\tthat.template = source.sizes.full.url;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthat.template = source.url;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthat.updateView();\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t},\n\t\t\t\tsetPreview() {\n\t\t\t\t\talert( 0 );\n\t\t\t\t},\n\t\t\t\taddLayerByDrop( args ) {\n\t\t\t\t\tconst $layer = this.createLayer( args );\n\n\t\t\t\t\tif ( $layer ) {\n\t\t\t\t\t\tthis.addLayer( $layer );\n\t\t\t\t\t\tthis.$canvas.calcOffset();\n\t\t\t\t\t\tthis.$canvas.renderAll();\n\t\t\t\t\t}\n\t\t\t\t\treturn $layer;\n\t\t\t\t},\n\t\t\t},\n\t\t} );\n\t} );\n}( jQuery ) );\n"],"names":["$","mediaSelector","__onSelect","__multiple","__context","activeFrame","frame","args","extend","k","Math","random","_frame","wp","media","title","button","text","button_text","multiple","state","on","select","source","get","single","toJSON","call","open","context","onSelect","f","document","ready","_","now","Date","getTime","debounce","func","wait","immediate","timeout","timestamp","result","later","last","setTimeout","apply","arguments","callNow","ajaxUpdateCourseCertificate","id","cert","ajax","url","data","course_id","cert_id","success","find","removeClass","e","preventDefault","$wrapper","$themes","$selected","closest","prepend","addClass","val","stopPropagation","lpCertificatesSettings","console","log","window","$LP_Certificates","Vue","el","template","dragover","viewport","width","height","templateWidth","templateHeight","ratio","$view","$layerOptions","loaded","i18n","computed","getMaxWidth","created","that","init","methods","$img","$img_preload","getElementById","initCanvas","initDragAndDrop","length","naturalWidth","naturalHeight","updateView","ajaxUpdateTemplate","trigger","options","name","value","updateActiveLayer","timer","clearTimeout","type","centerH","centerV","center","$layer","findLayer","$canvas","setActiveObject","target","is","deleteLayer","$layers","getObjects","i","addCustomPreview","getActiveLayer","position","top","abs","scaleY","originY","set","setCoords","left","scaleX","originX","confirm","confirm_remove_layer","remove","http","post","layer","emulateJSON","params","then","children","filter","getActiveObject","w","prop","setLayerProp","renderAll","ajaxUpdateLayer","calculate","maxWidth","css","setHeight","setWidth","setZoom","calcOffset","selector","$el","getLayerOptions","toObject","getExtendedFields","_fields","fields","triggerHandler","showControls","showLines","hideLines","toFixedX","num","ceil","hideControls","getLayers","layers","$objects","ajaxUpdateLayers","loadSettings","isPlainObject","hash","JSON","stringify","md5","response","body","hasClass","html","ajaxLoadLayer","show","addLayerList","$l","addLayer","setActive","createLayer","add","defaults","fontSize","lineHeight","fontFamily","uniqueId","fieldType","variable","$object","fabric","Text","qr_size","is_url","test","qr_code","Image","crossOrigin","src","borderColor","cornerColor","cornerSize","transparentCorners","padding","each","v","$_object","updateLayerOptions","$opt","parseInt","undefined","fill","isNaN","flipX","flipY","replace","onObjectSelected","layerOptions","onObjectMoving","event","onObjectRotating","angle","setPropSlider","onObjectMouseup","onObjectMousedown","onBeforeSelectionCleared","hide","onObjectModified","limitObjectScale","siblings","slider","Canvas","observe","selection","draggable","helper","drag","ui","targetOffset","offset","updateLines","droppable","over","out","drop","parentOffset","outerWidth","outerHeight","addLayerByDrop","trim","sortable","axis","start","$children","item","index","update","$obj","oldPosition","newPosition","sendBackwards","bringForward","updateRulers","end","s4","floor","toString","substring","selectTemplate","sizes","full","setPreview","alert","jQuery"],"sourceRoot":""}