(()=>{const{addQueryArgs:e}=wp.url;document.addEventListener("DOMContentLoaded",(function(){(()=>{const t=document.querySelector(".learnpress-certificates-profile");if(!t)return;let a={userID:t.querySelector('input[name="userID"]').value,page:1};const r=e=>{const t=document.querySelectorAll(".learnpress-certificates-profile .certificate-item");t.length&&t.forEach((t=>{const a=t.querySelector("input.lp-data-config-cer"),r=JSON.parse(a.value),s=t.querySelector(".certificate-preview");if(null===s)return;const c=s.dataset.key;e.includes(c)&&(LP_Certificate(s,r),a.dataset.value="")}))};document.addEventListener("click",(function(t){const s=document.querySelector("#certificates-load-more");if(s&&s.contains(t.target)){s.classList.add("loading");const t=s&&s.dataset.paged;a.page=t;const c=document.querySelector("#profile-content-certificates .profile-certificates");!async function(t,a){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const c=await wp.apiFetch({path:e("lp/v1/certificate/items-profile",t),method:"GET"}),{data:i,status:o,message:n}=c;if(a.innerHTML+="success"===o&&i?i.template:`<li class="lp-ajax-message error" style="display:block">${n}</li>`,s){s.classList.remove("loading");const e=s.dataset.paged;s.dataset.number<=e&&s.remove(),s.dataset.paged=parseInt(e)+1}r(i.certKey)}catch(e){a.innerHTML+=`<li class="lp-ajax-message error" style="display:block">${e}</li>`}}({...a},c,s)}})),(async(t,a)=>{const s=t.querySelector(".lp-skeleton-animation");try{const s=await wp.apiFetch({path:e("lp/v1/certificate/items-profile",a),method:"GET"}),{data:c,status:i,message:o}=s;if("error"===i)throw new Error(o||"Error");c&&t.insertAdjacentHTML("beforeend",c.template),r(c.certKey)}catch(e){t.insertAdjacentHTML("beforeend",`<div class="lp-ajax-message error" style="display:block">${e.message||"Error: Query lp/v1/certificate/items-profile"}</div>`)}s&&s.remove()})(t,{...a})})()}))})();