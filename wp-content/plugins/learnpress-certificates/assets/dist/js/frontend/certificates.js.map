{"version":3,"file":"./frontend/certificates.js","mappings":";;;;;AAAA;AACE,WAAUA,CAAC,EAAG;EACf,IAAIC,KAAK,EAAEC,qBAAqB,EAAEC,uBAAuB,EACxDC,0BAA0B,EAAEC,aAAa,EAAEC,qBAAqB,EAChEC,cAAc,EAAEC,iCAAiC;EAElD,IAAIC,+BAA+B;EACnC,IAAIC,8BAA8B;EAElCC,MAAM,CAACC,cAAc,GAAG,UAAUC,EAAE,EAAEC,OAAO,EAAG;IAC/C,IAAIC,IAAI,GAAG,IAAI;MACdC,QAAQ,GAAG;QACVC,KAAK,EAAE,CAAC;QACRC,MAAM,EAAE,CAAC;QACTC,aAAa,EAAE,CAAC;QAChBC,cAAc,EAAE,CAAC;QACjBC,KAAK,EAAE;MACR,CAAC;MACDC,GAAG,GAAGtB,CAAC,CAAEa,EAAE,CAAE;MACbU,OAAO,GAAG,IAAI;MACdC,YAAY;MAAEC,UAAU;IAEzB,IAAIC,sBAAsB,EAAEC,WAAW,EAAEC,qBAAqB;IAE9D,SAASC,IAAI,GAAG;MACfL,YAAY,GAAGxB,CAAC,CAAEW,MAAM,CAAE,CAACO,MAAM,EAAE;MACnCO,UAAU,GAAGzB,CAAC,CAAEW,MAAM,CAAE,CAACM,KAAK,EAAE;MAChCa,WAAW,EAAE;MACbC,UAAU,EAAE;MACZ/B,CAAC,CAAEgC,QAAQ,CAAE,CAACC,EAAE,CAAE,OAAO,EAAE,cAAc,GAAGX,GAAG,CAACY,IAAI,CAAE,IAAI,CAAE,GAAG,IAAI,EAAE,UAAUC,CAAC,EAAG;QAClFA,CAAC,CAACC,cAAc,EAAE;QAClBC,QAAQ,EAAE;MACX,CAAC,CAAE;MACHtB,IAAI,CAACQ,OAAO,GAAGA,OAAO;IACvB;IAEA,SAASO,WAAW,GAAG;MACtBJ,sBAAsB,GAAG1B,CAAC,CAAE,sBAAsB,CAAE;IACrD;IAEA,SAAS+B,UAAU,GAAG;MACrB,IAAK,CAAER,OAAO,EAAG;QAChBA,OAAO,GAAGD,GAAG,CAACgB,IAAI,CAAE,QAAQ,CAAE;QAC9Bf,OAAO,GAAG,IAAIgB,MAAM,CAACC,MAAM,CAAEjB,OAAO,CAACkB,GAAG,CAAE,CAAC,CAAE,CAAE;QAC/ClB,OAAO,CAACmB,SAAS,GAAG,KAAK;QAEzB1C,CAAC,CAAC2C,IAAI,CAAE7B,OAAO,CAAC8B,MAAM,EAAE,UAAUC,CAAC,EAAG;UACrCC,WAAW,EAAE;QACd,CAAC,CAAE;QAEH9C,CAAC,CAAC2C,IAAI,CAAE7B,OAAO,CAAC8B,MAAM,EAAE,UAAUC,CAAC,EAAEE,KAAK,EAAG;UAC5C,IAAK,CAAEA,KAAK,CAACC,IAAI,EAAG;YACnB;UACD;UAEA,IAAKhD,CAAC,CAACiD,aAAa,CAAEF,KAAK,CAAE,EAAG;YAC/BG,WAAW,CAAEH,KAAK,CAAE;UACrB;QACD,CAAC,CAAE;MACJ;IACD;IAEA,SAASI,aAAa,CAAEC,OAAO,EAAG;MACjC;MACA;MACA,MAAMC,UAAU,GAAGC,IAAI,CAAEF,OAAO,CAACG,KAAK,CAAE,GAAG,CAAE,CAAE,CAAC,CAAE,CAAE;;MAEpD;MACA,MAAMC,UAAU,GAAGJ,OAAO,CAACG,KAAK,CAAE,GAAG,CAAE,CAAE,CAAC,CAAE,CAACA,KAAK,CAAE,GAAG,CAAE,CAAE,CAAC,CAAE,CAACA,KAAK,CAAE,GAAG,CAAE,CAAE,CAAC,CAAE;;MAEhF;MACA,MAAME,EAAE,GAAG,IAAIC,WAAW,CAAEL,UAAU,CAACM,MAAM,CAAE;;MAE/C;MACA,MAAMC,EAAE,GAAG,IAAIC,UAAU,CAAEJ,EAAE,CAAE;;MAE/B;MACA,KAAM,IAAIZ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGQ,UAAU,CAACM,MAAM,EAAEd,CAAC,EAAE,EAAG;QAC7Ce,EAAE,CAAEf,CAAC,CAAE,GAAGQ,UAAU,CAACS,UAAU,CAAEjB,CAAC,CAAE;MACrC;;MAEA;MACA,MAAMkB,IAAI,GAAG,IAAIC,IAAI,CAAE,CAAEP,EAAE,CAAE,EAAE;QAAET,IAAI,EAAEQ;MAAW,CAAC,CAAE;MACrD,OAAOO,IAAI;IACZ;IAEA,IAAIE,kBAAkB,GAAG,aAAa;IAEtC,SAAS5B,QAAQ,GAAG;MACnB,IAAKV,WAAW,CAACgC,MAAM,EAAG;QACzB,MAAMO,YAAY,GAAGvC,WAAW,CAACwC,IAAI,CAAE,eAAe,CAAE;QAExD,IAAKC,SAAS,KAAKtD,OAAO,CAACuD,IAAI,EAAG;UACjCJ,kBAAkB,GAAGnD,OAAO,CAACuD,IAAI;QAClC;QAEA,QAASH,YAAY;UACrB,KAAK,KAAK;YACTI,WAAW,EAAE;YACb;UACD,KAAK,OAAO;UACZ;YACCC,aAAa,EAAE;YACf;QAAM;MAER;IACD;IAEA,SAASA,aAAa,GAAG;MACxB,MAAMC,IAAI,GAAG;QACZC,MAAM,EAAE,KAAK;QACbC,UAAU,EAAE,CAAC,GAAGnD,OAAO,CAACoD,OAAO;MAChC,CAAC;MAED,MAAMC,QAAQ,GAAGrD,OAAO,CAACsD,SAAS,EAAE;MACpC,MAAMC,SAAS,GAAG3B,aAAa,CAAEyB,QAAQ,CAAE;MAC3C,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,EAAE;MAE/Bf,kBAAkB,GAAGA,kBAAkB,GAAG,MAAM;MAEhDc,QAAQ,CAACE,MAAM,CAAE,OAAO,EAAEH,SAAS,EAAEb,kBAAkB,CAAE;MAEzDiB,UAAU,CAAE3D,OAAO,CAACsD,SAAS,CAAEL,IAAI,CAAE,EAAEP,kBAAkB,CAAE;MAE3D,OAAO,KAAK;IACb;IAEA,SAASkB,aAAa,GAAG;MACxB,MAAMX,IAAI,GAAG;QACZC,MAAM,EAAE,KAAK;QACbC,UAAU,EAAE,CAAC,GAAGnD,OAAO,CAACoD,OAAO,EAAE;QACjCS,OAAO,EAAE;MACV,CAAC;MAED,MAAMjB,IAAI,GAAG5C,OAAO,CAACsD,SAAS,CAAEL,IAAI,CAAE;MAEtC,MAAMa,IAAI,GAAGrF,CAAC,CAAE,oCAAoC,CAAE,CAACsF,YAAY,CAAE,GAAG,GAAGhE,GAAG,CAAE,CAAC,CAAE,CAACiE,EAAE,CAAE;MAExF3D,qBAAqB,GAAG5B,CAAC,CAAE,qBAAqB,CAAE;MAElDqF,IAAI,CAACnD,IAAI,CAAE,KAAK,EAAEiC,IAAI,CAAE;;MAExB;MACAqB,UAAU,CAAE,YAAW;QACtB,IAAKH,IAAI,CAACpE,KAAK,EAAE,GAAGQ,UAAU,EAAG;UAChCG,qBAAqB,CAAC6D,GAAG,CAAE,OAAO,EAAE,MAAM,CAAE;QAC7C;MACD,CAAC,EAAE,GAAG,CAAE;IACT;IAEA,IAAI3C,WAAW,GAAG,CAAC;IACnB,IAAI4C,kBAAkB,GAAG,CAAC;IAE1B,SAASC,uBAAuB,GAAG;MAClCD,kBAAkB,EAAE;MAEpB,IAAKA,kBAAkB,KAAK5C,WAAW,EAAG;QACzC,MAAM8C,cAAc,GAAG9E,OAAO,CAAC+E,QAAQ;QACvC;;QAEA,MAAMC,UAAU,GAAG,IAAIC,KAAK,EAAE;QAC9B,MAAMC,WAAW,GAAG,CAAC,CAAC;;QAEtB;QACA,IAAK5B,SAAS,KAAK6B,kBAAkB,EAAG;UACvC,MAAMC,cAAc,GAAG,IAAIC,MAAM,CAAE,GAAG,GAAGF,kBAAkB,CAACG,QAAQ,CAAE;UAEtE,IAAK,CAAEF,cAAc,CAACG,IAAI,CAAET,cAAc,CAAE,EAAG;YAC9CE,UAAU,CAACQ,WAAW,GAAG,WAAW;YACpCN,WAAW,CAACM,WAAW,GAAG,WAAW;UACtC;QACD;QAEAR,UAAU,CAACS,MAAM,GAAG,YAAW;UAC9BvF,QAAQ,GAAG;YACVC,KAAK,EAAE,IAAI,CAACA,KAAK;YACjBC,MAAM,EAAE,IAAI,CAACA;UACd,CAAC;UAEDqB,MAAM,CAACwD,KAAK,CAACS,OAAO,CAAEV,UAAU,CAACW,GAAG,EAAE,UAAUC,GAAG,EAAG;YACrDnF,OAAO,CAACoF,eAAe,GAAGD,GAAG;YAC7BE,UAAU,EAAE;YACZzB,aAAa,EAAE;YAEf,IAAK3E,iCAAiC,CAACmD,MAAM,EAAG;cAC/CkD,iBAAiB,EAAE;YACpB;YAEA,IAAKnF,sBAAsB,CAACiC,MAAM,EAAG;cACpChC,WAAW,GAAGD,sBAAsB,CAACY,IAAI,CAAE,WAAW,CAAE;YACzD;;YAEA;YACAtC,CAAC,CAAEgC,QAAQ,CAAE,CAAC8E,cAAc,CAAE,iCAAiC,CAAE;UAClE,CAAC,EAAEd,WAAW,CAAE;QACjB,CAAC;QAEDF,UAAU,CAACW,GAAG,GAAGb,cAAc;MAChC;IACD;IAEA,SAASiB,iBAAiB,GAAG;MAC5B,MAAM1C,IAAI,GAAG;QACZ4C,MAAM,EAAE,mBAAmB;QAC3BC,MAAM,EAAEpF,qBAAqB,CAACM,IAAI,CAAE,KAAK,CAAE;QAC3C+E,UAAU,EAAEnG,OAAO,CAACoG;MACrB,CAAC;MAEDlH,CAAC,CAACmH,IAAI,CAAE;QACPC,GAAG,EAAEnB,kBAAkB,CAACoB,QAAQ;QAChClD,IAAI;QACJmD,MAAM,EAAE,MAAM;QACdC,QAAQ,EAAE,MAAM;QAChBC,UAAU,GAAG;UACZ9F,sBAAsB,CAACuD,MAAM,CAAE,wDAAwD,CAAE;QAC1F,CAAC;QACDwC,OAAO,CAAEC,EAAE,EAAG;UACb,IAAKA,EAAE,CAACC,IAAI,KAAK,CAAC,EAAG;YACpB3H,CAAC,CAAC2C,IAAI,CAAEpC,cAAc,EAAE,UAAU4B,CAAC,EAAG;cACrC,MAAMyF,MAAM,GAAG5H,CAAC,CAAE,IAAI,CAAE,CAACsC,IAAI,CAAE,GAAG,CAAE;cACpC,MAAMuF,SAAS,GAAGD,MAAM,CAAC1F,IAAI,CAAE,MAAM,CAAE;cACvC,MAAM4F,cAAc,GAAGD,SAAS,GAAGH,EAAE,CAACK,QAAQ;cAC9CH,MAAM,CAAC1F,IAAI,CAAE,MAAM,EAAE4F,cAAc,CAAE;YACtC,CAAC,CAAE;YAEHvH,cAAc,CAACyH,IAAI,EAAE;UACtB;QACD,CAAC;QACDC,QAAQ,GAAG;UACVvG,sBAAsB,CAACY,IAAI,CAAE,aAAa,CAAE,CAAC4F,MAAM,EAAE;QACtD,CAAC;QACDC,KAAK,CAAEhG,CAAC,EAAG;UACViG,OAAO,CAACC,GAAG,CAAElG,CAAC,CAAE;QACjB;MACD,CAAC,CAAE;IACJ;IAEA,SAASmG,UAAU,CAAEC,KAAK,EAAG;MAC5B,MAAMpG,CAAC,GAAGH,QAAQ,CAACwG,aAAa,CAAE,KAAK,CAAE;MACzCrG,CAAC,CAACsG,SAAS,GAAGF,KAAK;MACnB,OAAOpG,CAAC,CAACuG,UAAU,CAAC/E,MAAM,KAAK,CAAC,GAAG,EAAE,GAAGxB,CAAC,CAACuG,UAAU,CAAE,CAAC,CAAE,CAACC,SAAS;IACpE;IAEA,SAASzF,WAAW,CAAEsB,IAAI,EAAG;MAC5BA,IAAI,CAACoE,IAAI,GAAGN,UAAU,CAAE9D,IAAI,CAACoE,IAAI,CAAE,IAAI,EAAE;MAEzC,MAAMC,QAAQ,GAAG7I,CAAC,CAAC8I,MAAM,CAAE;UACzBC,QAAQ,EAAE,EAAE;UACZC,IAAI,EAAE,CAAC;UACPC,GAAG,EAAE,CAAC;UACNC,UAAU,EAAE,CAAC;UACbC,OAAO,EAAE,QAAQ;UACjBC,OAAO,EAAE,QAAQ;UACjBC,UAAU,EAAE,WAAW;UACvBC,SAAS,EAAE,QAAQ;UACnBC,OAAO,EAAE;QACV,CAAC,EAAE/E,IAAI,CAAE;QACToE,IAAI,GAAGpE,IAAI,CAACoE,IAAI,IAAI,EAAE;MAEvB,IAAIY,OAAO,GAAG,IAAI;MAElB,IAAI;QACH,MAAMC,MAAM,GAAG,uBAAuB,CAACpD,IAAI,CAAE7B,IAAI,CAACoE,IAAI,CAAE;QAExD,IAAKpE,IAAI,CAAC8E,SAAS,IAAI,eAAe,IAAIG,MAAM,EAAG;UAClD,MAAMC,OAAO,GAAG,IAAI3D,KAAK,EAAE;UAC3B8C,QAAQ,CAAC7F,IAAI,GAAG,OAAO;UACvB6F,QAAQ,CAAC3H,MAAM,GAAG2H,QAAQ,CAACU,OAAO;UAClCV,QAAQ,CAAC5H,KAAK,GAAG4H,QAAQ,CAACU,OAAO;UACjCG,OAAO,CAACpD,WAAW,GAAG,WAAW;UAEjCoD,OAAO,CAACnD,MAAM,GAAG,YAAW;YAC3BiD,OAAO,GAAG,IAAIjH,MAAM,CAACwD,KAAK,CAAE2D,OAAO,EAAEb,QAAQ,CAAE;YAC/CtH,OAAO,CAACoI,GAAG,CAAEH,OAAO,CAAE;YAEtB7D,uBAAuB,EAAE;UAC1B,CAAC;UAED+D,OAAO,CAACjD,GAAG,GAAGjC,IAAI,CAACoE,IAAI;QACxB,CAAC,MAAM;UACN,MAAMgB,IAAI,GAAKC,CAAC,IAAMA,CAAC,CAACC,OAAO,CAC9B,kCAAkC,EAAE,MAAM,CAC1C;UAEDN,OAAO,GAAG,IAAIjH,MAAM,CAACwH,IAAI,CAAE,EAAE,EAAElB,QAAQ,CAAE;UAEzCW,OAAO,CAACZ,IAAI,GAAGgB,IAAI,CAAEJ,OAAO,CAACZ,IAAI,CAAE;UACnC;;UAEArH,OAAO,CAACoI,GAAG,CAAEH,OAAO,CAAE;UAEtB7D,uBAAuB,EAAE;QAC1B;MACD,CAAC,CAAC,OAAQxD,CAAC,EAAG;QACbiG,OAAO,CAACC,GAAG,CAAElG,CAAC,CAAE;MACjB;MAEA,OAAOqH,OAAO;IACf;IAEA,SAASQ,WAAW,GAAG;MACtB,OAAO1I,GAAG,CAACL,KAAK,EAAE;IACnB;IAEA,SAAS2F,UAAU,GAAG;MACrBrF,OAAO,CAAC0I,SAAS,CAAEjJ,QAAQ,CAACE,MAAM,CAAE;MACpCK,OAAO,CAAC2I,QAAQ,CAAElJ,QAAQ,CAACC,KAAK,CAAE;MAClCM,OAAO,CAAC4I,OAAO,CAAEnJ,QAAQ,CAACK,KAAK,CAAE;MACjCE,OAAO,CAAC6I,UAAU,EAAE;MACpB7I,OAAO,CAAC8I,SAAS,EAAE;;MAEnB;IACD;;IAEA,SAASC,QAAQ,GAAG;MACnB,IAAIC,QAAQ,GAAGjJ,GAAG,CAACkJ,QAAQ,CAAE,qBAAqB,CAAE;QACnDC,QAAQ,GAAGnJ,GAAG,CAACoJ,MAAM,EAAE,CAACzJ,KAAK,EAAE;QAC/B0J,SAAS,GAAG3K,CAAC,CAAEW,MAAM,CAAE,CAACO,MAAM,EAAE,IAAK,EAAE,GAAG0J,QAAQ,CAAEtJ,GAAG,CAACoJ,MAAM,EAAE,CAACG,QAAQ,EAAE,CAAC5B,GAAG,CAAE,CAAE;QACnF6B,QAAQ,GAAG9J,QAAQ,CAACC,KAAK;QACzB8J,SAAS,GAAG/J,QAAQ,CAACE,MAAM;MAE5B,MAAM8J,KAAK,GAAGC,IAAI,CAACC,GAAG,CACrBT,QAAQ,GAAGK,QAAQ,EACnBH,SAAS,GAAGI,SAAS,CACrB;MAEDD,QAAQ,GAAGA,QAAQ,GAAGE,KAAK;MAC3B,IAAKF,QAAQ,EAAG;QACfP,QAAQ,CAAC9E,GAAG,CAAE;UACb;QAAA,CACA,CAAE;MACJ;IACD;IAEA,SAAS0F,YAAY,CAAEC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAG;MAC5C,MAAMxK,OAAO,GAAG,CAAC,CAAC;MAClB,QAASuK,IAAI;QACb,KAAK,WAAW;UACf;UACA;QACD,KAAK,OAAO;UACX;UACAvK,OAAO,CAACyK,IAAI,GAAGD,KAAK;UACpB;QACD,KAAK,QAAQ;QACb,KAAK,QAAQ;UACZ,IAAKA,KAAK,GAAG,CAAC,EAAG;YAChB,IAAKD,IAAI,KAAK,QAAQ,EAAG;cACxBD,MAAM,CAACI,KAAK,GAAG,IAAI;YACpB,CAAC,MAAM;cACNJ,MAAM,CAACK,KAAK,GAAG,IAAI;YACpB;UACD,CAAC,MAAM,IAAKJ,IAAI,KAAK,QAAQ,EAAG;YAC/BD,MAAM,CAACI,KAAK,GAAG,KAAK;UACrB,CAAC,MAAM;YACNJ,MAAM,CAACK,KAAK,GAAG,KAAK;UACrB;UACA3K,OAAO,CAAEuK,IAAI,CAAE,GAAKJ,IAAI,CAACS,GAAG,CAAEJ,KAAK,CAAI;UACvC;QACD,KAAK,KAAK;QACV,KAAK,MAAM;QACX,KAAK,OAAO;UACXxK,OAAO,CAAEuK,IAAI,CAAE,GAAGT,QAAQ,CAAEU,KAAK,CAAE;UACnC;QACD;UACCxK,OAAO,CAAEuK,IAAI,CAAE,GAAGC,KAAK;MAAC;MAEzBtL,CAAC,CAAC2C,IAAI,CAAE7B,OAAO,EAAE,UAAU6K,CAAC,EAAEC,CAAC,EAAG;QACjCR,MAAM,CAACS,GAAG,CAAEF,CAAC,EAAEC,CAAC,CAAE;MACnB,CAAC,CAAE;MACHR,MAAM,CAACU,SAAS,EAAE;IACnB;IAEA,SAASxH,WAAW,GAAG;MACtB,MAAMyH,eAAe,GAAG,UAAU3E,GAAG,EAAE4E,QAAQ,EAAG;QACjD,MAAMtF,GAAG,GAAG,IAAIX,KAAK,EAAE;QACvB;;QAEAW,GAAG,CAACuF,OAAO,GAAG,YAAW;UACxBC,KAAK,CAAE,sBAAsB,GAAG9E,GAAG,GAAG,GAAG,CAAE;QAC5C,CAAC;QACDV,GAAG,CAACH,MAAM,GAAG,YAAW;UACvByF,QAAQ,CAAEtF,GAAG,EAAEA,GAAG,CAACzF,KAAK,EAAEyF,GAAG,CAACxF,MAAM,CAAE;QACvC,CAAC;QACDwF,GAAG,CAACD,GAAG,GAAGW,GAAG;MACd,CAAC;MAED,MAAM+E,SAAS,GAAG,UAAUC,OAAO,EAAEnL,KAAK,EAAEC,MAAM,EAAG;QACpD,IAAImL,GAAG,EAAEC,QAAQ,EAAEC,SAAS;QAE5B,IAAKtL,KAAK,IAAIC,MAAM,EAAG;UACtBmL,GAAG,GAAG,IAAIG,KAAK,CAAE,GAAG,EAAE,IAAI,EAAE,CAAEvL,KAAK,EAAEC,MAAM,CAAE,EAAE,IAAI,CAAE;UACrDoL,QAAQ,GAAGD,GAAG,CAACI,QAAQ,CAACC,QAAQ,CAACC,QAAQ,EAAE;UAC3CJ,SAAS,GAAKrL,MAAM,GAAGoL,QAAQ,GAAKrL,KAAK;QAC1C,CAAC,MAAM;UACNoL,GAAG,GAAG,IAAIG,KAAK,CAAE,GAAG,EAAE,IAAI,EAAE,CAAEvL,KAAK,EAAEC,MAAM,CAAE,EAAE,IAAI,CAAE;UACrDoL,QAAQ,GAAGD,GAAG,CAACI,QAAQ,CAACC,QAAQ,CAACC,QAAQ,EAAE;UAC3C;UACAJ,SAAS,GAAGF,GAAG,CAACI,QAAQ,CAACC,QAAQ,CAACE,SAAS,EAAE;QAC9C;QAEAP,GAAG,CAACQ,QAAQ,CAAET,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEE,QAAQ,EAAEC,SAAS,EAAE,EAAE,EAAE,MAAM,CAAE;QACrEF,GAAG,CAACS,IAAI,CAAE7I,kBAAkB,GAAG,MAAM,CAAE;MACxC,CAAC;MAEDrC,qBAAqB,GAAG5B,CAAC,CAAE,qBAAqB,CAAE;MAElD,IAAK4B,qBAAqB,CAAC+B,MAAM,EAAG;QACnC,MAAMyD,GAAG,GAAGxF,qBAAqB,CAACM,IAAI,CAAE,KAAK,CAAE;QAE/C6J,eAAe,CAAE3E,GAAG,EAAE+E,SAAS,CAAE;MAClC;IACD;IAEAtK,IAAI,EAAE;EACP,CAAC;EAED,SAASC,WAAW,GAAG;IACtB7B,KAAK,GAAGD,CAAC,CAAE,YAAY,CAAE;IACzBE,qBAAqB,GAAGF,CAAC,CAAE,qBAAqB,CAAE;IAClDG,uBAAuB,GAAGH,CAAC,CAAE,yCAAyC,CAAE;IACxEI,0BAA0B,GAAGJ,CAAC,CAAE,sCAAsC,CAAE;IACxEK,aAAa,GAAGL,CAAC,CAAE,oBAAoB,CAAE;IACzCM,qBAAqB,GAAGN,CAAC,CAAE,6BAA6B,CAAE;IAC1DO,cAAc,GAAGP,CAAC,CAAE,oBAAoB,CAAE;IAC1CQ,iCAAiC,GAAGR,CAAC,CAAE,4CAA4C,CAAE;IAErFS,+BAA+B,GAAGT,CAAC,CAAE,yCAAyC,CAAE;IAChFU,8BAA8B,GAAGV,CAAC,CAAE,kCAAkC,CAAE;EACzE;EAEA,SAAS+M,QAAQ,GAAG;IACnB,IAAK1M,aAAa,CAACsD,MAAM,EAAG;MAC3B,SAASqJ,KAAK,GAAG;QAChB3M,aAAa,CAAC4M,OAAO,CAAE,YAAW;UACjChN,KAAK,CAACwF,GAAG,CAAE,UAAU,EAAE,MAAM,CAAE;QAChC,CAAC,CAAE;MACJ;MAEA,SAASyH,IAAI,GAAG;QACfjN,KAAK,CAACwF,GAAG,CAAE,UAAU,EAAE,QAAQ,CAAE;QACjCpF,aAAa,CAAC8M,MAAM,EAAE;MACvB;MAEAnN,CAAC,CAAEgC,QAAQ,CAAE,CAACC,EAAE,CAAE,iCAAiC,EAAE,YAAW;QAC/D5B,aAAa,CAAC+M,QAAQ,CAAE,OAAO,CAAE,CAACC,IAAI,EAAE;QAExCpN,KAAK,CACHgC,EAAE,CAAE,OAAO,EAAE,UAAUE,CAAC,EAAG;UAC3B,IAAKA,CAAC,CAACmL,OAAO,KAAK,EAAE,EAAG;YACvBN,KAAK,EAAE;UACR;QACD,CAAC,CAAE,CACF/K,EAAE,CAAE,OAAO,EAAE,cAAc,EAAE,UAAUE,CAAC,EAAG;UAC3C6K,KAAK,EAAE;UACP7K,CAAC,CAACC,cAAc,EAAE;QACnB,CAAC,CAAE;QAEJhC,0BAA0B,CAAC6B,EAAE,CAAE,QAAQ,EAAE,UAAUE,CAAC,EAAG;UACtDA,CAAC,CAACC,cAAc,EAAE;UAClB8K,IAAI,EAAE;QACP,CAAC,CAAE;QAEH,IAAK/M,uBAAuB,CAACwD,MAAM,EAAG;UACrCuJ,IAAI,EAAE;QACP;MACD,CAAC,CAAE;IACJ;EACD;EAEA,SAASK,gBAAgB,CAAEC,IAAI,EAAG;IACjC,MAAMC,GAAG,GAAGD,IAAI,CAACE,aAAa,CAAE,2BAA2B,CAAE;IAC7D,MAAMC,QAAQ,GAAG,IAAI3I,QAAQ,CAAEwI,IAAI,CAAE;IACrC,MAAMrJ,IAAI,GAAGyJ,MAAM,CAACC,WAAW,CAAEF,QAAQ,CAACG,OAAO,EAAE,CAAE;IACrD3J,IAAI,CAAC4C,MAAM,GAAG,yBAAyB;IAEvC/G,CAAC,CAACmH,IAAI,CAAE;MACPC,GAAG,EAAEnB,kBAAkB,CAACoB,QAAQ;MAChClD,IAAI;MACJmD,MAAM,EAAE,MAAM;MACdE,UAAU,GAAG;QACZiG,GAAG,CAACM,SAAS,CAACpE,GAAG,CAAE,SAAS,CAAE;MAC/B,CAAC;MACDlC,OAAO,CAAEC,EAAE,EAAG;QACb,IAAKA,EAAE,CAACC,IAAI,KAAK,CAAC,EAAG;UACpB,IAAKvD,SAAS,KAAKsD,EAAE,CAACsG,WAAW,EAAG;YACnCrN,MAAM,CAACsN,QAAQ,CAACnE,OAAO,CAAEpC,EAAE,CAACsG,WAAW,CAAE;UAC1C,CAAC,MAAM;YACNR,IAAI,CAACU,OAAO,CAAE,kCAAkC,CAAE,CAACC,kBAAkB,CAAE,WAAW,EAAEzG,EAAE,CAAC0G,gBAAgB,CAAE;YACzGZ,IAAI,CAACtF,MAAM,EAAE;UACd;QACD,CAAC,MAAM;UACNgE,KAAK,CAAExE,EAAE,CAAC2G,OAAO,CAAE;QACpB;MACD,CAAC;MACDlG,KAAK,CAAEhG,CAAC,EAAG;QACViG,OAAO,CAACC,GAAG,CAAElG,CAAC,CAAE;MACjB,CAAC;MACD8F,QAAQ,GAAG;QACVwF,GAAG,CAACM,SAAS,CAAC7F,MAAM,CAAE,SAAS,CAAE;MAClC;IACD,CAAC,CAAE;EACJ;;EAEA;AACD;AACA;EACC,SAASoG,eAAe,CAAEd,IAAI,EAAG;IAChC,IAAIa,OAAO,GAAG,EAAE;IAChB,IAAIE,MAAM,GAAG,EAAE;IACf,MAAMZ,QAAQ,GAAG,IAAI3I,QAAQ,CAAEwI,IAAI,CAAE;IACrC,MAAMrJ,IAAI,GAAGyJ,MAAM,CAACC,WAAW,CAAEF,QAAQ,CAACG,OAAO,EAAE,CAAE;IACrD,MAAML,GAAG,GAAGD,IAAI,CAACE,aAAa,CAAC,2BAA2B,CAAC;IAC3DD,GAAG,CAACM,SAAS,CAACpE,GAAG,CAAC,SAAS,CAAC;IAE5B,MAAM6E,YAAY,GAAGxM,QAAQ,CAACwG,aAAa,CAAE,KAAK,CAAE;IACpDgG,YAAY,CAACT,SAAS,CAACpE,GAAG,CAAE,qBAAqB,CAAE;IAEnD8E,EAAE,CAACC,QAAQ,CAAE;MACZC,IAAI,EAAE,6BAA6B;MACnCrH,MAAM,EAAE,MAAM;MACdnD;IACD,CAAC,CAAE,CAACyK,IAAI,CAAIC,GAAG,IAAM;MACpB,MAAM;QAAE1K;MAAK,CAAC,GAAG0K,GAAG;MACpBN,MAAM,GAAGM,GAAG,CAACN,MAAM;MACnBF,OAAO,GAAGQ,GAAG,CAACR,OAAO;MAErBG,YAAY,CAACT,SAAS,CAACpE,GAAG,CAAE4E,MAAM,CAAE;MACpCC,YAAY,CAAC/F,SAAS,GAAG4F,OAAO;MAChCb,IAAI,CAACsB,qBAAqB,CAAE,WAAW,EAAEN,YAAY,CAAE;MAEvD,IAAKpK,SAAS,KAAKmK,MAAM,IAAIA,MAAM,KAAK,SAAS,EAAG;QACnD,IAAKpK,IAAI,CAAC4K,QAAQ,EAAG;UACpBvJ,UAAU,CAAE,YAAW;YACtB7E,MAAM,CAACsN,QAAQ,CAACe,IAAI,GAAG7K,IAAI,CAAC4K,QAAQ;UACrC,CAAC,EAAE,GAAG,CAAE;QACT;MACD;IACD,CAAC,CAAE,CAACE,KAAK,CAAIC,GAAG,IAAM;MACrBV,YAAY,CAACT,SAAS,CAACpE,GAAG,CAAE,OAAO,CAAE;MACrC6E,YAAY,CAAC/F,SAAS,GAAGyG,GAAG,CAACb,OAAO;MACpCb,IAAI,CAACsB,qBAAqB,CAAE,WAAW,EAAEN,YAAY,CAAE;IACxD,CAAC,CAAE,CAACI,IAAI,CAAE,MAAM;MACfnB,GAAG,CAACvF,MAAM,EAAE;IACb,CAAC,CAAE;EACJ;EAEAlI,CAAC,CAAEgC,QAAQ,CAAE,CAACmN,KAAK,CAAE,YAAW;IAC/BrN,WAAW,EAAE;IACbvB,cAAc,CAAC8M,IAAI,EAAE;IAErB,IAAK,CAAElN,uBAAuB,CAACwD,MAAM,EAAG;MACvCvD,0BAA0B,CAACqF,GAAG,CAAE,SAAS,EAAE,cAAc,CAAE;IAC5D;;IAEA;;IAEA;IACA,IAAKvF,qBAAqB,CAACyD,MAAM,EAAG;MACnC,IAAI;QACH3D,CAAC,CAAC2C,IAAI,CAAEzC,qBAAqB,EAAE,UAAU2C,CAAC,EAAG;UAC5C,MAAMuM,eAAe,GAAGC,IAAI,CAACC,KAAK,CAAEtP,CAAC,CAAE,IAAI,CAAE,CAACuP,GAAG,EAAE,CAAE,IAAI,CAAC,CAAC;UAE3DvP,CAAC,CAAE,IAAI,CAAE,CAACuP,GAAG,CAAE,EAAE,CAAE;UACnB,MAAMC,aAAa,GAAG,GAAG,GAAGxP,CAAC,CAAE,IAAI,CAAE,CAACkO,OAAO,CAAE,KAAK,CAAE,CAAChM,IAAI,CAAE,IAAI,CAAE;UAEnE,MAAMuN,GAAG,GAAG7O,cAAc,CAAE4O,aAAa,EAAEJ,eAAe,CAAE;;UAE5D;QACD,CAAC,CAAE;MACJ,CAAC,CAAC,OAAQjN,CAAC,EAAG;QACbiG,OAAO,CAACC,GAAG,CAAElG,CAAC,CAAE;MACjB;IACD;;IAEA;IACA4K,QAAQ,EAAE;;IAEV;IACA/K,QAAQ,CAAC0N,gBAAgB,CAAE,QAAQ,EAAE,UAAUvN,CAAC,EAAG;MAClD,MAAMtB,EAAE,GAAGsB,CAAC,CAACwN,MAAM;MAEnB,IAAK9O,EAAE,CAAC+O,YAAY,CAAC,MAAM,CAAC,KAAK,uBAAuB,EAAG;QAC1DzN,CAAC,CAACC,cAAc,EAAE;QAClBkM,eAAe,CAAEzN,EAAE,CAAE;MACtB,CAAC,MAAM,IAAKA,EAAE,CAAC+O,YAAY,CAAC,MAAM,CAAC,KAAK,8BAA8B,EAAG;QACxEzN,CAAC,CAACC,cAAc,EAAE;QAClBmL,gBAAgB,CAAE1M,EAAE,CAAE;MACvB;IACD,CAAC,CAAC;EACH,CAAC,CAAE;AACJ,CAAC,EAAEgP,MAAM,CAAE,C","sources":["webpack://learnpress-certificates/./assets/src/js/frontend/certificates.js"],"sourcesContent":["/* eslint-disable camelcase */\n( function( $ ) {\n\tlet $html, el_lp_data_config_cer, el_show_cer_popup_first,\n\t\tel_form_certificate_button, el_popup_cert, el_single_certificate,\n\t\tel_social_cert, el_need_upload_cert_img_to_server;\n\n\tlet el_form_lp_cert_add_to_cart_woo;\n\tlet el_form_lp_cert_add_to_cart_lp;\n\n\twindow.LP_Certificate = function( el, options ) {\n\t\tlet self = this,\n\t\t\tviewport = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t\ttemplateWidth: 0,\n\t\t\t\ttemplateHeight: 0,\n\t\t\t\tratio: 1,\n\t\t\t},\n\t\t\t$el = $( el ),\n\t\t\t$canvas = null,\n\t\t\twindowHeight, windowWith;\n\n\t\tlet el_certificate_actions, el_download, el_certificate_result;\n\n\t\tfunction init() {\n\t\t\twindowHeight = $( window ).height();\n\t\t\twindowWith = $( window ).width();\n\t\t\tgetElements();\n\t\t\tinitCanvas();\n\t\t\t$( document ).on( 'click', '[data-cert=\"' + $el.attr( 'id' ) + '\"]', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\tdownload();\n\t\t\t} );\n\t\t\tself.$canvas = $canvas;\n\t\t}\n\n\t\tfunction getElements() {\n\t\t\tel_certificate_actions = $( '.certificate-actions' );\n\t\t}\n\n\t\tfunction initCanvas() {\n\t\t\tif ( ! $canvas ) {\n\t\t\t\t$canvas = $el.find( 'canvas' );\n\t\t\t\t$canvas = new fabric.Canvas( $canvas.get( 0 ) );\n\t\t\t\t$canvas.selection = false;\n\n\t\t\t\t$.each( options.layers, function( i ) {\n\t\t\t\t\ttotal_layer++;\n\t\t\t\t} );\n\n\t\t\t\t$.each( options.layers, function( i, layer ) {\n\t\t\t\t\tif ( ! layer.type ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( $.isPlainObject( layer ) ) {\n\t\t\t\t\t\tcreateLayer( layer );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tfunction dataURItoBlob( dataURI ) {\n\t\t\t// convert base64 to raw binary data held in a string\n\t\t\t// doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n\t\t\tconst byteString = atob( dataURI.split( ',' )[ 1 ] );\n\n\t\t\t// separate out the mime component\n\t\t\tconst mimeString = dataURI.split( ',' )[ 0 ].split( ':' )[ 1 ].split( ';' )[ 0 ];\n\n\t\t\t// write the bytes of the string to an ArrayBuffer\n\t\t\tconst ab = new ArrayBuffer( byteString.length );\n\n\t\t\t// create a view into the buffer\n\t\t\tconst ia = new Uint8Array( ab );\n\n\t\t\t// set the bytes of the buffer to the correct values\n\t\t\tfor ( let i = 0; i < byteString.length; i++ ) {\n\t\t\t\tia[ i ] = byteString.charCodeAt( i );\n\t\t\t}\n\n\t\t\t// write the ArrayBuffer to a blob, and you're done\n\t\t\tconst blob = new Blob( [ ab ], { type: mimeString } );\n\t\t\treturn blob;\n\t\t}\n\n\t\tlet name_file_download = 'certificate';\n\n\t\tfunction download() {\n\t\t\tif ( el_download.length ) {\n\t\t\t\tconst downloadType = el_download.data( 'type-download' );\n\n\t\t\t\tif ( undefined !== options.name ) {\n\t\t\t\t\tname_file_download = options.name;\n\t\t\t\t}\n\n\t\t\t\tswitch ( downloadType ) {\n\t\t\t\tcase 'pdf':\n\t\t\t\t\tdownloadPDF();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'image':\n\t\t\t\tdefault:\n\t\t\t\t\tdownloadImage();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction downloadImage() {\n\t\t\tconst args = {\n\t\t\t\tformat: 'png',\n\t\t\t\tmultiplier: 1 / $canvas.getZoom(),\n\t\t\t};\n\n\t\t\tconst data_url = $canvas.toDataURL();\n\t\t\tconst imageBlob = dataURItoBlob( data_url );\n\t\t\tconst ajaxData = new FormData();\n\n\t\t\tname_file_download = name_file_download + '.png';\n\n\t\t\tajaxData.append( 'files', imageBlob, name_file_download );\n\n\t\t\tdownloadjs( $canvas.toDataURL( args ), name_file_download );\n\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction createPreview() {\n\t\t\tconst args = {\n\t\t\t\tformat: 'png',\n\t\t\t\tmultiplier: 1 / $canvas.getZoom(),\n\t\t\t\tquality: 1,\n\t\t\t};\n\n\t\t\tconst data = $canvas.toDataURL( args );\n\n\t\t\tconst $img = $( '<img class=\"certificate-result\" />' ).insertBefore( '#' + $el[ 0 ].id );\n\n\t\t\tel_certificate_result = $( '.certificate-result' );\n\n\t\t\t$img.attr( 'src', data );\n\n\t\t\t// Resize image certificate preview\n\t\t\tsetTimeout( function() {\n\t\t\t\tif ( $img.width() > windowWith ) {\n\t\t\t\t\tel_certificate_result.css( 'width', '100%' );\n\t\t\t\t}\n\t\t\t}, 100 );\n\t\t}\n\n\t\tlet total_layer = 0;\n\t\tlet total_layer_loaded = 0;\n\n\t\tfunction check_layers_added_done() {\n\t\t\ttotal_layer_loaded++;\n\n\t\t\tif ( total_layer_loaded === total_layer ) {\n\t\t\t\tconst url_img_cer_bg = options.template;\n\t\t\t\t//var url_img_cer_bg = 'https://cdn.glitch.com/4c9ebeb9-8b9a-4adc-ad0a-238d9ae00bb5%2Fmdn_logo-only_color.svg?1535749917189';\n\n\t\t\t\tconst img_cer_bg = new Image();\n\t\t\t\tconst args_fabric = {};\n\n\t\t\t\t// Check image crossOrigin\n\t\t\t\tif ( undefined !== localize_lp_cer_js ) {\n\t\t\t\t\tconst is_same_domain = new RegExp( '^' + localize_lp_cer_js.base_url );\n\n\t\t\t\t\tif ( ! is_same_domain.test( url_img_cer_bg ) ) {\n\t\t\t\t\t\timg_cer_bg.crossOrigin = 'Anonymous';\n\t\t\t\t\t\targs_fabric.crossOrigin = 'Anonymous';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\timg_cer_bg.onload = function() {\n\t\t\t\t\tviewport = {\n\t\t\t\t\t\twidth: this.width,\n\t\t\t\t\t\theight: this.height,\n\t\t\t\t\t};\n\n\t\t\t\t\tfabric.Image.fromURL( img_cer_bg.src, function( img ) {\n\t\t\t\t\t\t$canvas.backgroundImage = img;\n\t\t\t\t\t\tupdateView();\n\t\t\t\t\t\tcreatePreview();\n\n\t\t\t\t\t\tif ( el_need_upload_cert_img_to_server.length ) {\n\t\t\t\t\t\t\tsaveImageToServer();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( el_certificate_actions.length ) {\n\t\t\t\t\t\t\tel_download = el_certificate_actions.find( '.download' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Show popup certificate\n\t\t\t\t\t\t$( document ).triggerHandler( 'learn-press/certificates/loaded' );\n\t\t\t\t\t}, args_fabric );\n\t\t\t\t};\n\n\t\t\t\timg_cer_bg.src = url_img_cer_bg;\n\t\t\t}\n\t\t}\n\n\t\tfunction saveImageToServer() {\n\t\t\tconst data = {\n\t\t\t\taction: 'lpCertCreateImage',\n\t\t\t\tdata64: el_certificate_result.attr( 'src' ),\n\t\t\t\tname_image: options.key_cer,\n\t\t\t};\n\n\t\t\t$.ajax( {\n\t\t\t\turl: localize_lp_cer_js.url_ajax,\n\t\t\t\tdata,\n\t\t\t\tmethod: 'post',\n\t\t\t\tdataType: 'json',\n\t\t\t\tbeforeSend() {\n\t\t\t\t\tel_certificate_actions.append( '<li class=\"fa fa-spinner\">Loading share social...</li>' );\n\t\t\t\t},\n\t\t\t\tsuccess( rs ) {\n\t\t\t\t\tif ( rs.code === 1 ) {\n\t\t\t\t\t\t$.each( el_social_cert, function( e ) {\n\t\t\t\t\t\t\tconst elLink = $( this ).find( 'a' );\n\t\t\t\t\t\t\tconst hrefShare = elLink.attr( 'href' );\n\t\t\t\t\t\t\tconst url_cert_share = hrefShare + rs.url_cert;\n\t\t\t\t\t\t\telLink.attr( 'href', url_cert_share );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tel_social_cert.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tel_certificate_actions.find( '.fa-spinner' ).remove();\n\t\t\t\t},\n\t\t\t\terror( e ) {\n\t\t\t\t\tconsole.log( e );\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\tfunction htmlDecode( input ) {\n\t\t\tconst e = document.createElement( 'div' );\n\t\t\te.innerHTML = input;\n\t\t\treturn e.childNodes.length === 0 ? '' : e.childNodes[ 0 ].nodeValue;\n\t\t}\n\n\t\tfunction createLayer( args ) {\n\t\t\targs.text = htmlDecode( args.text ) || '';\n\n\t\t\tconst defaults = $.extend( {\n\t\t\t\t\tfontSize: 24,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tlineHeight: 1,\n\t\t\t\t\toriginX: 'center',\n\t\t\t\t\toriginY: 'center',\n\t\t\t\t\tfontFamily: 'Helvetica',\n\t\t\t\t\tfieldType: 'custom',\n\t\t\t\t\tqr_size: 40,\n\t\t\t\t}, args ),\n\t\t\t\ttext = args.text || '';\n\n\t\t\tlet $object = null;\n\n\t\t\ttry {\n\t\t\t\tconst is_url = /^(https?|s?ftp):\\/\\//i.test( args.text );\n\n\t\t\t\tif ( args.fieldType == 'verified-link' && is_url ) {\n\t\t\t\t\tconst qr_code = new Image();\n\t\t\t\t\tdefaults.type = 'image';\n\t\t\t\t\tdefaults.height = defaults.qr_size;\n\t\t\t\t\tdefaults.width = defaults.qr_size;\n\t\t\t\t\tqr_code.crossOrigin = 'Anonymous';\n\n\t\t\t\t\tqr_code.onload = function() {\n\t\t\t\t\t\t$object = new fabric.Image( qr_code, defaults );\n\t\t\t\t\t\t$canvas.add( $object );\n\n\t\t\t\t\t\tcheck_layers_added_done();\n\t\t\t\t\t};\n\n\t\t\t\t\tqr_code.src = args.text;\n\t\t\t\t} else {\n\t\t\t\t\tconst wrap = ( s ) => s.replace(\n\t\t\t\t\t\t/(?![^\\n]{1,64}$)([^\\n]{1,64})\\s/g, '$1\\n'\n\t\t\t\t\t);\n\n\t\t\t\t\t$object = new fabric.Text( '', defaults );\n\n\t\t\t\t\t$object.text = wrap( $object.text );\n\t\t\t\t\t//console.log($object.text);\n\n\t\t\t\t\t$canvas.add( $object );\n\n\t\t\t\t\tcheck_layers_added_done();\n\t\t\t\t}\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.log( e );\n\t\t\t}\n\n\t\t\treturn $object;\n\t\t}\n\n\t\tfunction getMaxWidth() {\n\t\t\treturn $el.width();\n\t\t}\n\n\t\tfunction updateView() {\n\t\t\t$canvas.setHeight( viewport.height );\n\t\t\t$canvas.setWidth( viewport.width );\n\t\t\t$canvas.setZoom( viewport.ratio );\n\t\t\t$canvas.calcOffset();\n\t\t\t$canvas.renderAll();\n\n\t\t\t//fitImage();\n\t\t}\n\n\t\tfunction fitImage() {\n\t\t\tlet $preview = $el.siblings( '.certificate-result' ),\n\t\t\t\tscrWidth = $el.parent().width(),\n\t\t\t\tscrHeight = $( window ).height() - ( 60 + parseInt( $el.parent().position().top ) ),\n\t\t\t\tmaxWidth = viewport.width,\n\t\t\t\tmaxHeight = viewport.height;\n\n\t\t\tconst scale = Math.min(\n\t\t\t\tscrWidth / maxWidth,\n\t\t\t\tscrHeight / maxHeight\n\t\t\t);\n\n\t\t\tmaxWidth = maxWidth * scale;\n\t\t\tif ( maxWidth ) {\n\t\t\t\t$preview.css( {\n\t\t\t\t\t//maxWidth: maxWidth * scale\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tfunction setLayerProp( $layer, prop, value ) {\n\t\t\tconst options = {};\n\t\t\tswitch ( prop ) {\n\t\t\tcase 'textAlign':\n\t\t\t\t//$layer.originX = value;\n\t\t\t\tbreak;\n\t\t\tcase 'color':\n\t\t\t\t//$layer.set('fill', value);\n\t\t\t\toptions.fill = value;\n\t\t\t\tbreak;\n\t\t\tcase 'scaleX':\n\t\t\tcase 'scaleY':\n\t\t\t\tif ( value < 0 ) {\n\t\t\t\t\tif ( prop === 'scaleX' ) {\n\t\t\t\t\t\t$layer.flipX = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$layer.flipY = true;\n\t\t\t\t\t}\n\t\t\t\t} else if ( prop === 'scaleX' ) {\n\t\t\t\t\t$layer.flipX = false;\n\t\t\t\t} else {\n\t\t\t\t\t$layer.flipY = false;\n\t\t\t\t}\n\t\t\t\toptions[ prop ] = ( Math.abs( value ) );\n\t\t\t\tbreak;\n\t\t\tcase 'top':\n\t\t\tcase 'left':\n\t\t\tcase 'angle':\n\t\t\t\toptions[ prop ] = parseInt( value );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\toptions[ prop ] = value;\n\t\t\t}\n\t\t\t$.each( options, function( k, v ) {\n\t\t\t\t$layer.set( k, v );\n\t\t\t} );\n\t\t\t$layer.setCoords();\n\t\t}\n\n\t\tfunction downloadPDF() {\n\t\t\tconst getImageFromUrl = function( url, callback ) {\n\t\t\t\tconst img = new Image();\n\t\t\t\t// img.crossOrigin = 'anonymous'\n\n\t\t\t\timg.onError = function() {\n\t\t\t\t\talert( 'Cannot load image: \"' + url + '\"' );\n\t\t\t\t};\n\t\t\t\timg.onload = function() {\n\t\t\t\t\tcallback( img, img.width, img.height );\n\t\t\t\t};\n\t\t\t\timg.src = url;\n\t\t\t};\n\n\t\t\tconst createPDF = function( imgData, width, height ) {\n\t\t\t\tlet doc, pdfWidth, pdfHeight;\n\n\t\t\t\tif ( width >= height ) {\n\t\t\t\t\tdoc = new jsPDF( 'l', 'mm', [ width, height ], true );\n\t\t\t\t\tpdfWidth = doc.internal.pageSize.getWidth();\n\t\t\t\t\tpdfHeight = ( height * pdfWidth ) / width;\n\t\t\t\t} else {\n\t\t\t\t\tdoc = new jsPDF( 'p', 'mm', [ width, height ], true );\n\t\t\t\t\tpdfWidth = doc.internal.pageSize.getWidth();\n\t\t\t\t\t// pdfHeight = (height * pdfWidth) / width;\n\t\t\t\t\tpdfHeight = doc.internal.pageSize.getHeight();\n\t\t\t\t}\n\n\t\t\t\tdoc.addImage( imgData, 'jpg', 0, 0, pdfWidth, pdfHeight, '', 'FAST' );\n\t\t\t\tdoc.save( name_file_download + '.pdf' );\n\t\t\t};\n\n\t\t\tel_certificate_result = $( '.certificate-result' );\n\n\t\t\tif ( el_certificate_result.length ) {\n\t\t\t\tconst url = el_certificate_result.attr( 'src' );\n\n\t\t\t\tgetImageFromUrl( url, createPDF );\n\t\t\t}\n\t\t}\n\n\t\tinit();\n\t};\n\n\tfunction getElements() {\n\t\t$html = $( 'html, body' );\n\t\tel_lp_data_config_cer = $( '.lp-data-config-cer' );\n\t\tel_show_cer_popup_first = $( 'input[name=f_auto_show_cer_popup_first]' );\n\t\tel_form_certificate_button = $( 'form[name=\"certificate-form-button\"]' );\n\t\tel_popup_cert = $( '#certificate-popup' );\n\t\tel_single_certificate = $( '.single-certificate-content' );\n\t\tel_social_cert = $( '.share-social-cert' );\n\t\tel_need_upload_cert_img_to_server = $( 'input[name=need_upload_cert_img_to_server]' );\n\n\t\tel_form_lp_cert_add_to_cart_woo = $( 'form[name=form-lp-cert-add-to-cart-woo]' );\n\t\tel_form_lp_cert_add_to_cart_lp = $( 'form[name=form-lp-cert-purchase]' );\n\t}\n\n\tfunction popupCer() {\n\t\tif ( el_popup_cert.length ) {\n\t\t\tfunction close() {\n\t\t\t\tel_popup_cert.fadeOut( function() {\n\t\t\t\t\t$html.css( 'overflow', 'auto' );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tfunction open() {\n\t\t\t\t$html.css( 'overflow', 'hidden' );\n\t\t\t\tel_popup_cert.fadeIn();\n\t\t\t}\n\n\t\t\t$( document ).on( 'learn-press/certificates/loaded', function() {\n\t\t\t\tel_popup_cert.addClass( 'ready' ).hide();\n\n\t\t\t\t$html\n\t\t\t\t\t.on( 'keyup', function( e ) {\n\t\t\t\t\t\tif ( e.keyCode === 27 ) {\n\t\t\t\t\t\t\tclose();\n\t\t\t\t\t\t}\n\t\t\t\t\t} )\n\t\t\t\t\t.on( 'click', '.close-popup', function( e ) {\n\t\t\t\t\t\tclose();\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t} );\n\n\t\t\t\tel_form_certificate_button.on( 'submit', function( e ) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\topen();\n\t\t\t\t} );\n\n\t\t\t\tif ( el_show_cer_popup_first.length ) {\n\t\t\t\t\topen();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction addCertToCartWoo( form ) {\n\t\tconst btn = form.querySelector( '.btn-add-cert-to-cart-woo' );\n\t\tconst formData = new FormData( form );\n\t\tconst data = Object.fromEntries( formData.entries() );\n\t\tdata.action = 'lp_cert_add_to_cart_woo';\n\n\t\t$.ajax( {\n\t\t\turl: localize_lp_cer_js.url_ajax,\n\t\t\tdata,\n\t\t\tmethod: 'post',\n\t\t\tbeforeSend() {\n\t\t\t\tbtn.classList.add( 'loading' );\n\t\t\t},\n\t\t\tsuccess( rs ) {\n\t\t\t\tif ( rs.code === 1 ) {\n\t\t\t\t\tif ( undefined !== rs.redirect_to ) {\n\t\t\t\t\t\twindow.location.replace( rs.redirect_to );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tform.closest( '.wrapper-lp-cert-add-to-cart-woo' ).insertAdjacentHTML( 'beforeend', rs.button_view_cart );\n\t\t\t\t\t\tform.remove();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\talert( rs.message );\n\t\t\t\t}\n\t\t\t},\n\t\t\terror( e ) {\n\t\t\t\tconsole.log( e );\n\t\t\t},\n\t\t\tcomplete() {\n\t\t\t\tbtn.classList.remove( 'loading' );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Event add certificate to cart LP\n\t */\n\tfunction addCertToCartLP( form ) {\n\t\tlet message = '';\n\t\tlet status = '';\n\t\tconst formData = new FormData( form );\n\t\tconst data = Object.fromEntries( formData.entries() );\n\t\tconst btn = form.querySelector('.btn-purchase-certificate');\n\t\tbtn.classList.add('loading');\n\n\t\tconst newElMessage = document.createElement( 'div' );\n\t\tnewElMessage.classList.add( 'learn-press-message' );\n\n\t\twp.apiFetch( {\n\t\t\tpath: '/lp/v1/certificate/purchase',\n\t\t\tmethod: 'POST',\n\t\t\tdata,\n\t\t} ).then( ( res ) => {\n\t\t\tconst { data } = res;\n\t\t\tstatus = res.status;\n\t\t\tmessage = res.message;\n\n\t\t\tnewElMessage.classList.add( status );\n\t\t\tnewElMessage.innerHTML = message;\n\t\t\tform.insertAdjacentElement( 'beforeend', newElMessage );\n\n\t\t\tif ( undefined !== status && status === 'success' ) {\n\t\t\t\tif ( data.redirect ) {\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\twindow.location.href = data.redirect;\n\t\t\t\t\t}, 800 );\n\t\t\t\t}\n\t\t\t}\n\t\t} ).catch( ( err ) => {\n\t\t\tnewElMessage.classList.add( 'error' );\n\t\t\tnewElMessage.innerHTML = err.message;\n\t\t\tform.insertAdjacentElement( 'beforeend', newElMessage );\n\t\t} ).then( () => {\n\t\t\tbtn.remove();\n\t\t} );\n\t}\n\n\t$( document ).ready( function() {\n\t\tgetElements();\n\t\tel_social_cert.hide();\n\n\t\tif ( ! el_show_cer_popup_first.length ) {\n\t\t\tel_form_certificate_button.css( 'display', 'inline-block' );\n\t\t}\n\n\t\t//console.log(localize_lp_cer_js);\n\n\t\t/*** Create certificates ***/\n\t\tif ( el_lp_data_config_cer.length ) {\n\t\t\ttry {\n\t\t\t\t$.each( el_lp_data_config_cer, function( i ) {\n\t\t\t\t\tconst data_config_cer = JSON.parse( $( this ).val() ) || {};\n\n\t\t\t\t\t$( this ).val( '' );\n\t\t\t\t\tconst id_div_parent = '#' + $( this ).closest( 'div' ).attr( 'id' );\n\n\t\t\t\t\tconst cer = LP_Certificate( id_div_parent, data_config_cer );\n\n\t\t\t\t\t//console.log(data_config_cer);\n\t\t\t\t} );\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.log( e );\n\t\t\t}\n\t\t}\n\n\t\t// Popup Certificate\n\t\tpopupCer();\n\n\t\t// Events submit form\n\t\tdocument.addEventListener( 'submit', function( e ) {\n\t\t\tconst el = e.target;\n\n\t\t\tif ( el.getAttribute('name') === 'form-lp-cert-purchase' ) {\n\t\t\t\te.preventDefault();\n\t\t\t\taddCertToCartLP( el );\n\t\t\t} else if ( el.getAttribute('name') === 'form-lp-cert-add-to-cart-woo' ) {\n\t\t\t\te.preventDefault();\n\t\t\t\taddCertToCartWoo( el );\n\t\t\t}\n\t\t});\n\t} );\n}( jQuery ) );\n\n"],"names":["$","$html","el_lp_data_config_cer","el_show_cer_popup_first","el_form_certificate_button","el_popup_cert","el_single_certificate","el_social_cert","el_need_upload_cert_img_to_server","el_form_lp_cert_add_to_cart_woo","el_form_lp_cert_add_to_cart_lp","window","LP_Certificate","el","options","self","viewport","width","height","templateWidth","templateHeight","ratio","$el","$canvas","windowHeight","windowWith","el_certificate_actions","el_download","el_certificate_result","init","getElements","initCanvas","document","on","attr","e","preventDefault","download","find","fabric","Canvas","get","selection","each","layers","i","total_layer","layer","type","isPlainObject","createLayer","dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","charCodeAt","blob","Blob","name_file_download","downloadType","data","undefined","name","downloadPDF","downloadImage","args","format","multiplier","getZoom","data_url","toDataURL","imageBlob","ajaxData","FormData","append","downloadjs","createPreview","quality","$img","insertBefore","id","setTimeout","css","total_layer_loaded","check_layers_added_done","url_img_cer_bg","template","img_cer_bg","Image","args_fabric","localize_lp_cer_js","is_same_domain","RegExp","base_url","test","crossOrigin","onload","fromURL","src","img","backgroundImage","updateView","saveImageToServer","triggerHandler","action","data64","name_image","key_cer","ajax","url","url_ajax","method","dataType","beforeSend","success","rs","code","elLink","hrefShare","url_cert_share","url_cert","show","complete","remove","error","console","log","htmlDecode","input","createElement","innerHTML","childNodes","nodeValue","text","defaults","extend","fontSize","left","top","lineHeight","originX","originY","fontFamily","fieldType","qr_size","$object","is_url","qr_code","add","wrap","s","replace","Text","getMaxWidth","setHeight","setWidth","setZoom","calcOffset","renderAll","fitImage","$preview","siblings","scrWidth","parent","scrHeight","parseInt","position","maxWidth","maxHeight","scale","Math","min","setLayerProp","$layer","prop","value","fill","flipX","flipY","abs","k","v","set","setCoords","getImageFromUrl","callback","onError","alert","createPDF","imgData","doc","pdfWidth","pdfHeight","jsPDF","internal","pageSize","getWidth","getHeight","addImage","save","popupCer","close","fadeOut","open","fadeIn","addClass","hide","keyCode","addCertToCartWoo","form","btn","querySelector","formData","Object","fromEntries","entries","classList","redirect_to","location","closest","insertAdjacentHTML","button_view_cart","message","addCertToCartLP","status","newElMessage","wp","apiFetch","path","then","res","insertAdjacentElement","redirect","href","catch","err","ready","data_config_cer","JSON","parse","val","id_div_parent","cer","addEventListener","target","getAttribute","jQuery"],"sourceRoot":""}